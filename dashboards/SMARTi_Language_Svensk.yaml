title: SMARTi
views:
  - title: Home - Svensk
    path: default_view
    icon: mdi:home
    layout:
      max_width: 2000
      max_cols: 1
    subview: false
    type: custom:masonry-layout
    cards:
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: horizontal-stack
          cards:
            - type: custom:gap-card
            - type: custom:button-card
              name: Internett
              icon: mdi:wifi
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              entity: binary_sensor.8_8_8_8
              tap_action:
                action: url
                url_path: https://www.smarti.dev
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: custom:button-card
              name: Alarm
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              tap_action:
                action: more-info
                entity: alarm_control_panel.alarmo
              entity: alarm_control_panel.alarmo
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_motion_sensors
                  above: 0
              card:
                type: custom:button-card
                name: Bevegelse
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive bevegelsedetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: motion
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_motion_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_lights
              card:
                type: custom:button-card
                name: Lys
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive lys
                      content:
                        type: custom:auto-entities
                        show_empty: false
                        card:
                          show_name: true
                          show_icon: true
                          show_state: true
                          type: glance
                          title: Lights on
                          state_color: true
                          columns: 4
                        filter:
                          include:
                            - domain: light
                              state: 'on'
                              options:
                                tap_action:
                                  action: toggle
                        sort:
                          method: none
                          reverse: false
                          numeric: false
                entity: sensor.active_lights
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_doors
              card:
                type: custom:button-card
                name: Dører
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne dører
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: door
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_doors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_windows
                  above: 0
              card:
                type: custom:button-card
                name: Vinduer
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)'
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne Vinduer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: window
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_windows
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_water_sensors
              card:
                type: custom:button-card
                name: Vann
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Vanndetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: moisture
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_water_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_smoke_detectors
                  above: 0
              card:
                type: custom:button-card
                name: Røyk
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Røykdetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: smoke
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_smoke_detectors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_gas_sensors
              card:
                type: custom:button-card
                name: Gass
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Gassdetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: gas
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_gas_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_low_battery_devices_count
              card:
                type: custom:button-card
                name: Batterier
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Batterier
                      content:
                        type: custom:auto-entities
                        card:
                          show_header_toggle: false
                          type: entities
                          state_color: true
                        filter:
                          include:
                            - entity_id: sensor.*_battery
                            - entity_id: binary_sensor.*battery_low
                            - entity_id: sensor.*.battery_state
                          exclude:
                            - state: unavailable
                            - state: '-'
                            - state: unknown
                            - state: none
                            - state: '= 0,0'
                            - state: '>= 20'
                            - state: 'off'
                            - entity_id: sensor.campainha_ring_mqtt_battery
                            - entity_id: sensor.campainha_battery
                            - state: None
                            - state: charging
                            - state: discharging
                            - state: high
                            - name: /[Ll]ow/
                            - name: /[Ss]tate/
                        sort:
                          method: friendly_name
                          numeric: true
                          ignore_case: false
                          ip: false
                          reverse: false
                        show_empty: false
                entity: sensor.active_low_battery_devices_count
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unknown
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unavailable
              card:
                type: custom:mini-graph-card
                entities:
                  - sensor.dynamic_power_sensor
                name: Forbruk
                height: 50
                color_thresholds:
                  - value: 3000
                    color: '#f39c12'
                  - value: 5000
                    color: '#d35400'
                  - value: 8000
                    color: '#c0392b'
                hours_to_show: 6
                points_per_hour: 10
                align_icon: right
                align_state: right
                align_header: right
                show:
                  name: true
                  legend: true
                  icon: false
                  labels: false
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                      background: transparent;
                      color: var(--primary-color);
                    }
                    .graph {
                      mask-image: linear-gradient(to right, transparent, black);
                    }
            - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:home
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 15px;
                  background-color: var(--primary-color);
                }
          - type: custom:button-card
            name: Rooms
            show_icon: true
            icon: mdi:cube-unfolded
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: rooms#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Light Control
            show_icon: true
            icon: mdi:lightbulb-group
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            state:
              - value: 'on'
                styles:
                  card:
                    - background-color: '#FF7000'
            tap_action:
              action: navigate
              navigation_path: lights#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;   

                }  
          - type: custom:button-card
            name: Heating Control
            show_icon: true
            icon: mdi:thermometer-water
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: heating#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:multimedia
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Security
            show_icon: true
            icon: mdi:shield
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: cameras#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Power Control
            show_icon: true
            icon: mdi:lightning-bolt
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: power#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Settings
            show_icon: true
            icon: mdi:cog
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px 5px 15px 5px;
                }  
      - type: custom:gap-card
        height: 25
      - type: custom:mushroom-title-card
        title: Hallo {{ user }}!
        subtitle: |-

          HA en fantastisk dag!
        alignment: center
      - type: custom:gap-card
        height: 25
      - type: custom:search-card
        icon: mdi:magnify
        search_text: Søk ...
        max_results: 100
        background: >-
          linear-gradient(to bottom, var(--accent-color),
          rgb(var(--rgb-primary-color-darker)));
        card_mod:
          style: |
            ha-card {
              border-radius: 10px 10px 2px 2px;
              background: linear-gradient(to right, var(--accent-color), transparent);
              color: white;

            }
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                      }
                    
        card:
          type: custom:tabbed-card
          options:
            defaultTabIndex: 1
          styles:
            '--mdc-tab-color-default': var(--primary-color);
            '--mdc-theme-primary': var(--primary-text-color);
            '--mdc-tab-text-label-color-default': var(--primary-color);
            '--mdc-tab-bar-ink-color': orange;
          tabs:
            - attributes:
                label: Brukere
                icon: mdi:human-male-female-child
                stacked: true
                isFadingIndicator: true
                isMinWidthIndicator: true
              card:
                type: vertical-stack
                cards:
                  - type: custom:auto-entities
                    card:
                      type: glance
                      show_name: true
                      show_icon: true
                      show_state: true
                    filter:
                      include:
                        - entity_id: person.*
                          options:
                            type: custom:mini-card
                      exclude:
                        - entity_id: person.smarti
                  - type: custom:auto-entities
                    card:
                      type: map
                      aspect_ratio: '21:9'
                      default_zoom: 12
                    filter:
                      include:
                        - domain: person
                          options:
                            secondary_info: last-changed
                      exclude:
                        - entity_id: person.administrator
                        - entity_id: person.smarti
                  - type: custom:mushroom-template-card
                    primary: Administrer brukere
                    secondary: Legg til eller fjern brukere
                    icon: mdi:human-female
                    badge_icon: mdi:plus
                    badge_color: primary
                    tap_action:
                      action: navigate
                      navigation_path: /config/person
                    layout: vertical
                    card_mod:
                      style: |
                        ha-card {
                          --ha-card-background: var(--ha-card-background) !important;
                        }
            - attributes:
                label: Vær
                icon: mdi:weather-partly-cloudy
                stacked: true
                isFadingIndicator: true
                isMinWidthIndicator: true
              card:
                type: vertical-stack
                cards:
                  - type: custom:weather-chart-card
                    entity: weather.forecast_sjekteveien
                    show_time: true
                    show_date: true
                    units:
                      speed: m/s
                      pressure: ''
                    forecast:
                      precipitation_type: ''
                      style: style2
                      type: hourly
                    animated_icons: true
                    title: Time for time
                  - type: custom:weather-chart-card
                    entity: weather.forecast_sjekteveien
                    show_main: true
                    show_temperature: true
                    show_current_condition: true
                    show_attributes: true
                    show_time: false
                    show_time_seconds: false
                    show_day: false
                    show_date: false
                    show_humidity: true
                    show_pressure: true
                    show_wind_direction: true
                    show_wind_speed: true
                    show_sun: true
                    show_feels_like: false
                    show_dew_point: false
                    show_wind_gust_speed: false
                    show_visibility: false
                    show_last_changed: false
                    use_12hour_format: false
                    icons_size: 25
                    animated_icons: false
                    icon_style: style1
                    forecast:
                      precipitation_type: rainfall
                      show_probability: false
                      labels_font_size: '11'
                      precip_bar_size: '100'
                      style: style1
                      show_wind_forecast: true
                      condition_icons: true
                      round_temp: false
                      type: daily
                      number_of_forecasts: '0'
                      disable_animation: false
                    units:
                      pressure: ''
                      speed: ''
                    title: Ukentlig
                  - type: horizontal-stack
                    cards:
                      - type: iframe
                        url: >-
                          https://embed.windy.com/embed.html?type=map&location=coordinates&metricRain=default&metricTemp=default&metricWind=default&zoom=5&overlay=wind&product=ecmwf&level=surface&lat=57.184&lon=8.525&detailLat=58.124&detailLon=7.91&detail=true&message=true
                        aspect_ratio: 100%
            - attributes:
                label: Kalender
                icon: mdi:calendar
                stacked: true
                isFadingIndicator: true
                isMinWidthIndicator: true
              card:
                type: vertical-stack
                cards:
                  - type: calendar
                    entities:
                      - calendar.familiekalender
      - type: custom:auto-entities
        card:
          type: calendar
          title: Kalender
        filter:
          include:
            - domain: calendar
          exclude: []
          sort:
            method: name
        show_empty: false
        unique: true
    visible:
      - user: 9d433704c3094f709e144261ad9f8c25
      - user: 6b4921c7a1fb42128033eb5c6b8db80b
    background:
      image: /api/image/serve/c0603ffefeb8f59127821c828f77cca1/original
  - title: Rooms
    path: rooms
    icon: mdi:cube-unfolded
    type: custom:horizontal-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: horizontal-stack
          cards:
            - type: custom:gap-card
            - type: custom:button-card
              name: Internett
              icon: mdi:wifi
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              entity: binary_sensor.8_8_8_8
              tap_action:
                action: url
                url_path: https://www.smarti.dev
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: custom:button-card
              name: Alarm
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              tap_action:
                action: more-info
                entity: alarm_control_panel.alarmo
              entity: alarm_control_panel.alarmo
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_motion_sensors
                  above: 0
              card:
                type: custom:button-card
                name: Bevegelse
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive bevegelsedetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: motion
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_motion_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_lights
              card:
                type: custom:button-card
                name: Lys
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive lys
                      content:
                        type: custom:auto-entities
                        show_empty: false
                        card:
                          show_name: true
                          show_icon: true
                          show_state: true
                          type: glance
                          title: Lights on
                          state_color: true
                          columns: 4
                        filter:
                          include:
                            - domain: light
                              state: 'on'
                              options:
                                tap_action:
                                  action: toggle
                        sort:
                          method: none
                          reverse: false
                          numeric: false
                entity: sensor.active_lights
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_doors
              card:
                type: custom:button-card
                name: Dører
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne dører
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: door
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_doors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_windows
                  above: 0
              card:
                type: custom:button-card
                name: Vinduer
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)'
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne Vinduer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: window
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_windows
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_water_sensors
              card:
                type: custom:button-card
                name: Vann
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Vanndetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: moisture
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_water_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_smoke_detectors
                  above: 0
              card:
                type: custom:button-card
                name: Røyk
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Røykdetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: smoke
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_smoke_detectors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_gas_sensors
              card:
                type: custom:button-card
                name: Gass
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Gassdetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: gas
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_gas_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_low_battery_devices_count
              card:
                type: custom:button-card
                name: Batterier
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Batterier
                      content:
                        type: custom:auto-entities
                        card:
                          show_header_toggle: false
                          type: entities
                          state_color: true
                        filter:
                          include:
                            - entity_id: sensor.*_battery
                            - entity_id: binary_sensor.*battery_low
                            - entity_id: sensor.*.battery_state
                          exclude:
                            - state: unavailable
                            - state: '-'
                            - state: unknown
                            - state: none
                            - state: '= 0,0'
                            - state: '>= 20'
                            - state: 'off'
                            - entity_id: sensor.campainha_ring_mqtt_battery
                            - entity_id: sensor.campainha_battery
                            - state: None
                            - state: charging
                            - state: discharging
                            - state: high
                            - name: /[Ll]ow/
                            - name: /[Ss]tate/
                        sort:
                          method: friendly_name
                          numeric: true
                          ignore_case: false
                          ip: false
                          reverse: false
                        show_empty: false
                entity: sensor.active_low_battery_devices_count
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unknown
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unavailable
              card:
                type: custom:mini-graph-card
                entities:
                  - sensor.dynamic_power_sensor
                name: Forbruk
                height: 50
                color_thresholds:
                  - value: 3000
                    color: '#f39c12'
                  - value: 5000
                    color: '#d35400'
                  - value: 8000
                    color: '#c0392b'
                hours_to_show: 6
                points_per_hour: 10
                align_icon: right
                align_state: right
                align_header: right
                show:
                  name: true
                  legend: true
                  icon: false
                  labels: false
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                      background: transparent;
                      color: var(--primary-color);
                    }
                    .graph {
                      mask-image: linear-gradient(to right, transparent, black);
                    }
            - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Home
            show_icon: true
            icon: mdi:home
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: home#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 15px;

                }
          - type: custom:button-card
            name: Rooms
            show_icon: true
            icon: mdi:cube-unfolded
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: rooms#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                  background-color: var(--primary-color);
                }
          - type: custom:button-card
            name: Light Control
            show_icon: true
            icon: mdi:lightbulb-group
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            state:
              - value: 'on'
                styles:
                  card:
                    - background-color: '#FF7000'
            tap_action:
              action: navigate
              navigation_path: lights#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;   

                }  
          - type: custom:button-card
            name: Heating Control
            show_icon: true
            icon: mdi:thermometer-water
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: heating#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:multimedia
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Security
            show_icon: true
            icon: mdi:shield
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: cameras#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Power Control
            show_icon: true
            icon: mdi:lightning-bolt
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: power#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Settings
            show_icon: true
            icon: mdi:cog
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px 5px 15px 5px;
                }  
      - type: custom:gap-card
        height: 25
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-title-card
            title: Rom
            subtitle: |-

              Rom, utildelte enheter & batterioversikt
            alignment: center
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: custom:mod-card
          card_mod:
            style:
              .: |
                ha-card {
                  --ha-card-border-width: 0.5px;
                  --ha-card-border-radius: 20px;
                  --ha-card-background: transparent;
                } 
              tabbed-card $:
                mwc-tab:
                  $: |
                    .mdc-tab--active {
                      background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                      border-radius: 5px 5px 0px 0px;
                    }
                    mwc-tab:hover {
                      --mdc-theme-primary: red;
                      --mdc-tab-color-default: red;
                        }
                      
          card:
            type: custom:tabbed-card
            tabs:
              - attributes:
                  label: Rom
                  icon: mdi:cube-unfolded
                type: conditional
                conditions:
                  - condition: screen
                    media_query: '(min-width: 768px)'
                card:
                  type: custom:auto-entities
                  card:
                    type: grid
                    columns: 3
                    square: false
                    style:
                      background-color: var(--primary-color)
                  card_param: cards
                  filter:
                    template: |-
                      {% for AREA in areas() -%}
                        {{
                          {
                            'type': 'area',
                            'area': AREA,
                            'show_camera': 'true',
                            'camera_view': 'live',
                            'sensor_classes': [
                              'temperature',
                              'humidity',
                              'energy',
                              'illuminance',
                              'aqi'
                              'battery',
                              'voltage',
                              'power_factor',
                              'apparent_power',
                              'data_rate',
                              'co',
                              'co2',
                              'date',
                              'signal_strength',
                              'volume',
                              'wind_speed',
                              'water',
                            ],
                            'alert_classes': [
                              'motion',
                              'moisture',
                              'smoke',
                              'gas',
                              ],
                          }
                        }}
                        {%- if not loop.last %},{% endif %}
                      {%- endfor %}
              - attributes:
                  label: Utildelte Komponenter
                  icon: mdi:chat-question
                card:
                  type: custom:auto-entities
                  card:
                    type: entities
                    title: Enheter ikke tildelt et område
                    show_header_toggle: false
                  filter:
                    include:
                      - domain: light
                        not:
                          area: '*'
                      - domain: switch
                        not:
                          area: '*'
                      - domain: lock
                        not:
                          area: '*'
                      - domain: cover
                        not:
                          area: '*'
                      - domain: climate
                        not:
                          area: '*'
                      - domain: fan
                        not:
                          area: '*'
                      - domain: media_player
                        not:
                          area: '*'
                      - domain: sensor
                        attributes:
                          device_class: temperature
                          not: null
                          area: '*'
                      - domain: sensor
                        attributes:
                          device_class: humidity
                          not: null
                          area: '*'
                    exclude:
                      - domain: group
              - attributes:
                  label: Batterioversikt
                  icon: mdi:battery
                card:
                  type: custom:vertical-stack-in-card
                  cards:
                    - type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          entity: null
                          icon: mdi:battery
                          icon_color: green
                          content: Batterier
                          card_mod:
                            style: |
                              ha-card {
                                background: transparent;
                                border-style: none;
                              }
                    - type: custom:auto-entities
                      card:
                        type: custom:stack-in-card
                        card_mod:
                          style: |
                            ha-card {
                              padding-top: 5px;
                              padding-bottom: 0px;
                              border-width: 0px;
                              background: none;
                              --ha-card-box-shadow: 0px;
                            }
                      filter:
                        include:
                          - entity_id: sensor.*battery
                            options:
                              type: custom:bar-card
                              card_mod:
                                style: |
                                  bar-card-currentbar, bar-card-backgroundbar {
                                    border-radius: 12px !important;
                                    height: 70px !important; /* Adjusted height */
                                    margin-top: -8px !important;
                                    width: 100%;
                                    right: 0.5%;
                                    display: flex; /* Added */
                                    justify-content: center; /* Added */
                                    align-items: center; /* Added */
                                  }
                                  ha-icon {
                                    position: relative;
                                    padding: 0px; /* Removed padding */
                                    border-radius: 50%;
                                    display: flex; /* Added */
                                    justify-content: center !important; /* Added */
                                    align-items: center !important; /* Added */
                                    --mdc-icon-size: calc(100% - 6px); /* Dynamic icon size */
                                    right: 4px;
                                  }
                                  bar-card-row, ha-icon {
                                    color: color-mix(in srgb, var(--bar-color) 100%, transparent) !important;
                                    background: color-mix(in srgb, var(--bar-color) 20%, transparent);
                                  }
                                  bar-card-indicator {
                                    color: color-mix(in srgb, var(--bar-color) 100%, transparent) !important;
                                    top: -18px;
                                  } 
                                  bar-card-name {
                                    margin-top: auto !important; /* Changed to auto */
                                    left: 0px;
                                    color: white; /* Changed this line */
                                    display: flex; /* Added */
                                    justify-content: center; /* Added */
                                    align-items: center; /* Added */
                                    background-color: black; /* Added */
                                    padding: 4px; /* Added padding to increase visibility */
                                    border-radius: 5px; /* Added border-radius for aesthetics */
                                  }
                                  bar-card-value {
                                    margin-top: auto !important; /* Changed to auto */
                                    font-size: 16px;
                                    width: 0px;
                                    color: white;
                                    display: flex; /* Added */
                                    justify-content: right; /* Added */
                                    align-items: right; /* Added */
                                    background-color: black; /* Added */
                                    padding: 15px; /* Added padding to increase visibility */
                                    padding-left: 60px;
                                    margin-right: 20px;
                                    border-radius: 10px; /* Added border-radius for aesthetics */
                                    width: 40px;
                                  }
                                  ha-card {
                                    margin: -4px 0px !important;
                                    height: 90px; /* Adjusted height */
                                  }
                                  bar-card-row bar-card-currentbar,
                                  ha-icon, bar-card-backgroundbar {
                                    --bar-color:
                                    {% if states(config.entity) == 'unavailable' or states(config.entity) == 'none' %}
                                      MediumSeaGreen !important;
                                      --card-mod-icon: mdi:bug !important;
                                    {% elif states(config.entity) | int <= 10 %}
                                      #ff0026 !important;
                                      --card-mod-icon: mdi:battery-10 !important;
                                    {% elif states(config.entity) | int <= 20 %}
                                      #ff4d00 !important;
                                      --card-mod-icon: mdi:battery-20 !important;
                                    {% elif states(config.entity) | int <= 30 %}
                                      #ff9900 !important;
                                      --card-mod-icon: mdi:battery-30 !important;
                                    {% elif states(config.entity) | int <= 40 %}
                                      #ffcc00 !important;
                                      --card-mod-icon: mdi:battery-40 !important;
                                    {% elif states(config.entity) | int <= 50 %}
                                      #e7fc03 !important;
                                      --card-mod-icon: mdi:battery-50 !important;
                                    {% elif states(config.entity) | int <= 60 %}
                                      #aaff00 !important;
                                      --card-mod-icon: mdi:battery-60 !important;
                                    {% elif states(config.entity) | int <= 70 %}
                                      #aaff00 !important;
                                      --card-mod-icon: mdi:battery-70 !important;
                                    {% elif states(config.entity) | int <= 80 %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery-80 !important;
                                    {% elif states(config.entity) | int <= 90 %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery-90 !important;
                                    {% elif states(config.entity) | int <= 100 %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery !important;
                                    {% endif %}
                                  }
                                  bar-card-row ha-icon {
                                    color: color-mix(in srgb, var(--bar-color) 100%, transparent);
                                    margin-top: 15px;
                                    width: 70px; !important;
                                    height: 70px !important;
                                    border-radius: 15px;
                                    display: flex; /* Added */
                                    justify-content: center !important; /* Added */
                                    align-items: center !important; /* Added */
                                    --mdc-icon-size: calc(100% - 6px); /* Dynamic icon size */
                                  }
                                  ha-card {
                                    padding: 0px !important;
                                    margin: -2px !important;
                                    height: 90px; /* Adjusted height */
                                    border-width: 0px;
                                    background: none;
                                    --ha-card-box-shadow: 0px;
                                  }
                      sort:
                        method: state
                        numeric: true
                        ip: false
                        ignore_case: false
                        reverse: false
                      show_empty: true
                      card_param: cards
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
        card:
          type: custom:mod-card
          card_mod:
            style:
              .: |
                ha-card {
                  --ha-card-border-width: 0.5px;
                  --ha-card-border-radius: 20px;
                  --ha-card-background: transparent;
                } 
              tabbed-card $:
                mwc-tab:
                  $: |
                    .mdc-tab--active {
                      background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                      border-radius: 5px 5px 0px 0px;
                    }
                    mwc-tab:hover {
                      --mdc-theme-primary: red;
                      --mdc-tab-color-default: red;
                        }
                      
          card:
            type: custom:tabbed-card
            tabs:
              - attributes:
                  label: Rom
                  icon: mdi:cube-unfolded
                type: conditional
                conditions:
                  - condition: screen
                    media_query: '(min-width: 768px)'
                card:
                  type: custom:auto-entities
                  card:
                    type: grid
                    columns: 1
                    square: false
                    style:
                      background-color: var(--primary-color)
                  card_param: cards
                  filter:
                    template: |-
                      {% for AREA in areas() -%}
                        {{
                          {
                            'type': 'area',
                            'area': AREA,
                            'show_camera': 'true',
                            'camera_view': 'live',
                            'sensor_classes': [
                              'temperature',
                              'humidity',
                              'energy',
                              'illuminance',
                              'aqi'
                              'battery',
                              'voltage',
                              'power_factor',
                              'apparent_power',
                              'data_rate',
                              'co',
                              'co2',
                              'date',
                              'signal_strength',
                              'volume',
                              'wind_speed',
                              'water',
                            ],
                            'alert_classes': [
                              'motion',
                              'moisture',
                              'smoke',
                              'gas',
                              ],
                          }
                        }}
                        {%- if not loop.last %},{% endif %}
                      {%- endfor %}
              - attributes:
                  label: Utildelte Komponenter
                  icon: mdi:chat-question
                card:
                  type: custom:auto-entities
                  card:
                    type: entities
                    title: Enheter ikke tildelt et område
                    show_header_toggle: false
                  filter:
                    include:
                      - domain: light
                        not:
                          area: '*'
                      - domain: switch
                        not:
                          area: '*'
                      - domain: lock
                        not:
                          area: '*'
                      - domain: cover
                        not:
                          area: '*'
                      - domain: climate
                        not:
                          area: '*'
                      - domain: fan
                        not:
                          area: '*'
                      - domain: media_player
                        not:
                          area: '*'
                      - domain: sensor
                        attributes:
                          device_class: temperature
                          not: null
                          area: '*'
                      - domain: sensor
                        attributes:
                          device_class: humidity
                          not: null
                          area: '*'
                    exclude:
                      - domain: group
              - attributes:
                  label: Batterioversikt
                  icon: mdi:battery
                card:
                  type: custom:vertical-stack-in-card
                  cards:
                    - type: custom:mushroom-chips-card
                      chips:
                        - type: template
                          entity: null
                          icon: mdi:battery
                          icon_color: green
                          content: Batterier
                          card_mod:
                            style: |
                              ha-card {
                                background: transparent;
                                border-style: none;
                              }
                    - type: custom:auto-entities
                      card:
                        type: custom:stack-in-card
                        card_mod:
                          style: |
                            ha-card {
                              padding-top: 5px;
                              padding-bottom: 0px;
                              border-width: 0px;
                              background: none;
                              --ha-card-box-shadow: 0px;
                            }
                      filter:
                        include:
                          - entity_id: sensor.*battery
                            options:
                              type: custom:bar-card
                              card_mod:
                                style: |
                                  bar-card-currentbar, bar-card-backgroundbar {
                                    border-radius: 12px !important;
                                    height: 70px !important; /* Adjusted height */
                                    margin-top: -8px !important;
                                    width: 100%;
                                    right: 0.5%;
                                    display: flex; /* Added */
                                    justify-content: center; /* Added */
                                    align-items: center; /* Added */
                                  }
                                  ha-icon {
                                    position: relative;
                                    padding: 0px; /* Removed padding */
                                    border-radius: 50%;
                                    display: flex; /* Added */
                                    justify-content: center !important; /* Added */
                                    align-items: center !important; /* Added */
                                    --mdc-icon-size: calc(100% - 6px); /* Dynamic icon size */
                                    right: 4px;
                                  }
                                  bar-card-row, ha-icon {
                                    color: color-mix(in srgb, var(--bar-color) 100%, transparent) !important;
                                    background: color-mix(in srgb, var(--bar-color) 20%, transparent);
                                  }
                                  bar-card-indicator {
                                    color: color-mix(in srgb, var(--bar-color) 100%, transparent) !important;
                                    top: -18px;
                                  } 
                                  bar-card-name {
                                    margin-top: auto !important; /* Changed to auto */
                                    left: 0px;
                                    color: white; /* Changed this line */
                                    display: flex; /* Added */
                                    justify-content: center; /* Added */
                                    align-items: center; /* Added */
                                    background-color: black; /* Added */
                                    padding: 4px; /* Added padding to increase visibility */
                                    border-radius: 5px; /* Added border-radius for aesthetics */
                                  }
                                  bar-card-value {
                                    margin-top: auto !important; /* Changed to auto */
                                    font-size: 16px;
                                    width: 0px;
                                    color: white;
                                    display: flex; /* Added */
                                    justify-content: right; /* Added */
                                    align-items: right; /* Added */
                                    background-color: black; /* Added */
                                    padding: 15px; /* Added padding to increase visibility */
                                    padding-left: 60px;
                                    margin-right: 20px;
                                    border-radius: 10px; /* Added border-radius for aesthetics */
                                    width: 40px;
                                  }
                                  ha-card {
                                    margin: -4px 0px !important;
                                    height: 90px; /* Adjusted height */
                                  }
                                  bar-card-row bar-card-currentbar,
                                  ha-icon, bar-card-backgroundbar {
                                    --bar-color:
                                    {% if states(config.entity) == 'unavailable' or states(config.entity) == 'none' %}
                                      MediumSeaGreen !important;
                                      --card-mod-icon: mdi:bug !important;
                                    {% elif states(config.entity) | int <= 10 %}
                                      #ff0026 !important;
                                      --card-mod-icon: mdi:battery-10 !important;
                                    {% elif states(config.entity) | int <= 20 %}
                                      #ff4d00 !important;
                                      --card-mod-icon: mdi:battery-20 !important;
                                    {% elif states(config.entity) | int <= 30 %}
                                      #ff9900 !important;
                                      --card-mod-icon: mdi:battery-30 !important;
                                    {% elif states(config.entity) | int <= 40 %}
                                      #ffcc00 !important;
                                      --card-mod-icon: mdi:battery-40 !important;
                                    {% elif states(config.entity) | int <= 50 %}
                                      #e7fc03 !important;
                                      --card-mod-icon: mdi:battery-50 !important;
                                    {% elif states(config.entity) | int <= 60 %}
                                      #aaff00 !important;
                                      --card-mod-icon: mdi:battery-60 !important;
                                    {% elif states(config.entity) | int <= 70 %}
                                      #aaff00 !important;
                                      --card-mod-icon: mdi:battery-70 !important;
                                    {% elif states(config.entity) | int <= 80 %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery-80 !important;
                                    {% elif states(config.entity) | int <= 90 %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery-90 !important;
                                    {% elif states(config.entity) | int <= 100 %}
                                      #22c402 !important;
                                      --card-mod-icon: mdi:battery !important;
                                    {% endif %}
                                  }
                                  bar-card-row ha-icon {
                                    color: color-mix(in srgb, var(--bar-color) 100%, transparent);
                                    margin-top: 15px;
                                    width: 70px; !important;
                                    height: 70px !important;
                                    border-radius: 15px;
                                    display: flex; /* Added */
                                    justify-content: center !important; /* Added */
                                    align-items: center !important; /* Added */
                                    --mdc-icon-size: calc(100% - 6px); /* Dynamic icon size */
                                  }
                                  ha-card {
                                    padding: 0px !important;
                                    margin: -2px !important;
                                    height: 90px; /* Adjusted height */
                                    border-width: 0px;
                                    background: none;
                                    --ha-card-box-shadow: 0px;
                                  }
                      sort:
                        method: state
                        numeric: true
                        ip: false
                        ignore_case: false
                        reverse: false
                      show_empty: true
                      card_param: cards
    background:
      image: /api/image/serve/d026cfe3b95783b60134128e8dcec645/original
  - title: Lights Control
    path: lights
    icon: mdi:lightbulb
    type: custom:masonry-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: horizontal-stack
          cards:
            - type: custom:gap-card
            - type: custom:button-card
              name: Internett
              icon: mdi:wifi
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              entity: binary_sensor.8_8_8_8
              tap_action:
                action: url
                url_path: https://www.smarti.dev
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: custom:button-card
              name: Alarm
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              tap_action:
                action: more-info
                entity: alarm_control_panel.alarmo
              entity: alarm_control_panel.alarmo
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_motion_sensors
                  above: 0
              card:
                type: custom:button-card
                name: Bevegelse
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive bevegelsedetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: motion
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_motion_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_lights
              card:
                type: custom:button-card
                name: Lys
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive lys
                      content:
                        type: custom:auto-entities
                        show_empty: false
                        card:
                          show_name: true
                          show_icon: true
                          show_state: true
                          type: glance
                          title: Lights on
                          state_color: true
                          columns: 4
                        filter:
                          include:
                            - domain: light
                              state: 'on'
                              options:
                                tap_action:
                                  action: toggle
                        sort:
                          method: none
                          reverse: false
                          numeric: false
                entity: sensor.active_lights
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_doors
              card:
                type: custom:button-card
                name: Dører
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne dører
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: door
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_doors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_windows
                  above: 0
              card:
                type: custom:button-card
                name: Vinduer
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)'
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne Vinduer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: window
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_windows
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_water_sensors
              card:
                type: custom:button-card
                name: Vann
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Vanndetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: moisture
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_water_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_smoke_detectors
                  above: 0
              card:
                type: custom:button-card
                name: Røyk
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Røykdetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: smoke
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_smoke_detectors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_gas_sensors
              card:
                type: custom:button-card
                name: Gass
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Gassdetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: gas
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_gas_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_low_battery_devices_count
              card:
                type: custom:button-card
                name: Batterier
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Batterier
                      content:
                        type: custom:auto-entities
                        card:
                          show_header_toggle: false
                          type: entities
                          state_color: true
                        filter:
                          include:
                            - entity_id: sensor.*_battery
                            - entity_id: binary_sensor.*battery_low
                            - entity_id: sensor.*.battery_state
                          exclude:
                            - state: unavailable
                            - state: '-'
                            - state: unknown
                            - state: none
                            - state: '= 0,0'
                            - state: '>= 20'
                            - state: 'off'
                            - entity_id: sensor.campainha_ring_mqtt_battery
                            - entity_id: sensor.campainha_battery
                            - state: None
                            - state: charging
                            - state: discharging
                            - state: high
                            - name: /[Ll]ow/
                            - name: /[Ss]tate/
                        sort:
                          method: friendly_name
                          numeric: true
                          ignore_case: false
                          ip: false
                          reverse: false
                        show_empty: false
                entity: sensor.active_low_battery_devices_count
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unknown
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unavailable
              card:
                type: custom:mini-graph-card
                entities:
                  - sensor.dynamic_power_sensor
                name: Forbruk
                height: 50
                color_thresholds:
                  - value: 3000
                    color: '#f39c12'
                  - value: 5000
                    color: '#d35400'
                  - value: 8000
                    color: '#c0392b'
                hours_to_show: 6
                points_per_hour: 10
                align_icon: right
                align_state: right
                align_header: right
                show:
                  name: true
                  legend: true
                  icon: false
                  labels: false
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                      background: transparent;
                      color: var(--primary-color);
                    }
                    .graph {
                      mask-image: linear-gradient(to right, transparent, black);
                    }
            - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Home
            show_icon: true
            icon: mdi:home
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: home#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 15px;

                }
          - type: custom:button-card
            name: Rooms
            show_icon: true
            icon: mdi:cube-unfolded
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: rooms#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Light Control
            show_icon: true
            icon: mdi:lightbulb-group
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
              name:
                - color: black
            state:
              - value: 'on'
                styles:
                  card:
                    - background-color: '#FF7000'
            tap_action:
              action: navigate
              navigation_path: lights#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;   
                  background-color: var(--primary-color);
                }  
          - type: custom:button-card
            name: Heating Control
            show_icon: true
            icon: mdi:thermometer-water
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: heating#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:multimedia
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Security
            show_icon: true
            icon: mdi:shield
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: cameras#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Power Control
            show_icon: true
            icon: mdi:lightning-bolt
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: power#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Settings
            show_icon: true
            icon: mdi:cog
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px 5px 15px 5px;
                }  
      - type: custom:gap-card
        height: 25
      - type: horizontal-stack
        cards:
          - type: custom:mushroom-title-card
            title: Lyskontroll
            subtitle: |-

              Lys & Scener
            alignment: center
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                      }
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: Lyskontroll
                icon: mdi:lightbulb
              card:
                type: custom:auto-entities
                card:
                  title: Lys
                  type: entities
                filter:
                  template: >-
                    {% set area_filter = ['area1', 'area2'] %}  {% set filter =
                    ['light.light1', 'light.light2'] %}

                    {%- set areas = states.light
                        | rejectattr('entity_id', 'in', filter)
                        | map(attribute='entity_id')
                        | map('area_name') | unique | reject('none')
                        | reject('in', area_filter)
                        | list -%}

                    {% if areas | length == 0 %}
                      [
                        {
                          'type': 'custom:button-text-card',
                          'title': 'Ingen lys funnet',
                          'subtitle':'Undersøk om enheten ligger under "Ikke tildelte enheter"',
                          'icon': 'mdi:chat-question',
                          'background_color': 'var(--primary-color)',
                        }
                      ]
                    {% else %}
                      [
                        {%- for area in areas %}
                          {
                            'type': 'custom:button-card',
                            'styles': {
                              'card': [
                                { 'height': '5px' },
                                { 'max-height': '10px' },
                                { 'padding': '0' },
                                { 'margin': '0' },
                                { 'background-color': 'var(--primary-color)' }
                              ]
                            }
                          },
                          {
                            'type': 'custom:button-text-card',
                            'title': '{{ area }}',
                            'icon': 'mdi:lightbulb',
                            'background_color': 'var(--primary-color)',
                          },
                          {%- set lights = states.light
                              | rejectattr('entity_id', 'in', filter)
                              | selectattr('entity_id', 'in', area_entities(area))
                              | list -%}
                          {%- for light in lights %}
                            {
                              'type': 'custom:mushroom-light-card',
                              'entity': '{{ light.entity_id }}',
                              'use_light_color': 'true',
                              'show_brightness_control': 'true',
                              'show_color_control': 'true',
                              'collapsible_controls': 'false',
                              'show_color_temp_control': 'true'
                            }
                            {%- if not loop.last %},{% endif %}
                          {%- endfor %}
                          {%- if not loop.last %},{% endif %}
                        {%- endfor %}
                      ]
                    {% endif %}
                  exclude:
                    - hidden_by: '*'
            - attributes:
                label: Scenekontroll
                icon: mdi:movie
              card:
                type: custom:mod-card
                card:
                  type: custom:auto-entities
                  card:
                    title: Scener
                    type: entities
                  filter:
                    template: >-
                      {% set filter = ['scene.scene1','scene.scene2'] %} {% set
                      hidden_entities = states |
                      selectattr('attributes.is_hidden', 'eq', true) |
                      map(attribute='entity_id') | list %}

                      {%- set scenes = states.scene
                        | rejectattr('entity_id', 'in', filter)
                        | rejectattr('entity_id', 'in', hidden_entities)
                        | list -%}

                      {% if scenes | length == 0 %}
                        {{{ 'type': 'custom:button-text-card',
                            'title': 'Ingen scener funnet',
                            'subtitle' :'SMARTi finner ingen lagde scener',
                            'icon': 'mdi:chat-question',
                            'background_color': 'var(--primary-color)',
                        }}},
                      {% else %} 

                      {%- for scene in scenes  -%} {{{ 'type':
                      'custom:button-card',
                          'entity': scene.entity_id,
                          'icon': 'mdi:play-circle-outline',
                          'show_icon': true,
                          'show_name': true,
                          'tap_action': {
                            'action': 'call-service',
                            'service': 'scene.turn_on',
                            'service_data': {
                              'entity_id': scene.entity_id
                            }
                          },
                          'styles': {
                            'card': [
                              { 'height': '100px'},
                              { 'padding': '5px'},
                              { 'margin-top': '10px'},
                              { 'max-height:': '150px'},
                              { 'border-radius': '20px'},
                            ],
                            'icon': [
                              { 'color': 'var(--accent-color)'},                        
                            ],
                            'name': [
                              { 'color': 'var(--secondary-color)'},
                            ],
                          }
                      }}},   {%- endfor %} {%- endif %}
                    exclude:
                      - hidden_by: '*'
    background:
      image: /api/image/serve/e657cff1b9cc08e5620e6a685e83f77a/original
  - title: Climate Control
    path: heating
    icon: mdi:thermometer-water
    type: custom:horizontal-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: horizontal-stack
          cards:
            - type: custom:gap-card
            - type: custom:button-card
              name: Internett
              icon: mdi:wifi
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              entity: binary_sensor.8_8_8_8
              tap_action:
                action: url
                url_path: https://www.smarti.dev
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: custom:button-card
              name: Alarm
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              tap_action:
                action: more-info
                entity: alarm_control_panel.alarmo
              entity: alarm_control_panel.alarmo
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_motion_sensors
                  above: 0
              card:
                type: custom:button-card
                name: Bevegelse
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive bevegelsedetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: motion
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_motion_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_lights
              card:
                type: custom:button-card
                name: Lys
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive lys
                      content:
                        type: custom:auto-entities
                        show_empty: false
                        card:
                          show_name: true
                          show_icon: true
                          show_state: true
                          type: glance
                          title: Lights on
                          state_color: true
                          columns: 4
                        filter:
                          include:
                            - domain: light
                              state: 'on'
                              options:
                                tap_action:
                                  action: toggle
                        sort:
                          method: none
                          reverse: false
                          numeric: false
                entity: sensor.active_lights
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_doors
              card:
                type: custom:button-card
                name: Dører
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne dører
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: door
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_doors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_windows
                  above: 0
              card:
                type: custom:button-card
                name: Vinduer
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)'
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne Vinduer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: window
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_windows
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_water_sensors
              card:
                type: custom:button-card
                name: Vann
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Vanndetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: moisture
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_water_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_smoke_detectors
                  above: 0
              card:
                type: custom:button-card
                name: Røyk
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Røykdetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: smoke
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_smoke_detectors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_gas_sensors
              card:
                type: custom:button-card
                name: Gass
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Gassdetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: gas
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_gas_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_low_battery_devices_count
              card:
                type: custom:button-card
                name: Batterier
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Batterier
                      content:
                        type: custom:auto-entities
                        card:
                          show_header_toggle: false
                          type: entities
                          state_color: true
                        filter:
                          include:
                            - entity_id: sensor.*_battery
                            - entity_id: binary_sensor.*battery_low
                            - entity_id: sensor.*.battery_state
                          exclude:
                            - state: unavailable
                            - state: '-'
                            - state: unknown
                            - state: none
                            - state: '= 0,0'
                            - state: '>= 20'
                            - state: 'off'
                            - entity_id: sensor.campainha_ring_mqtt_battery
                            - entity_id: sensor.campainha_battery
                            - state: None
                            - state: charging
                            - state: discharging
                            - state: high
                            - name: /[Ll]ow/
                            - name: /[Ss]tate/
                        sort:
                          method: friendly_name
                          numeric: true
                          ignore_case: false
                          ip: false
                          reverse: false
                        show_empty: false
                entity: sensor.active_low_battery_devices_count
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unknown
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unavailable
              card:
                type: custom:mini-graph-card
                entities:
                  - sensor.dynamic_power_sensor
                name: Forbruk
                height: 50
                color_thresholds:
                  - value: 3000
                    color: '#f39c12'
                  - value: 5000
                    color: '#d35400'
                  - value: 8000
                    color: '#c0392b'
                hours_to_show: 6
                points_per_hour: 10
                align_icon: right
                align_state: right
                align_header: right
                show:
                  name: true
                  legend: true
                  icon: false
                  labels: false
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                      background: transparent;
                      color: var(--primary-color);
                    }
                    .graph {
                      mask-image: linear-gradient(to right, transparent, black);
                    }
            - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Home
            show_icon: true
            icon: mdi:home
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: home#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 15px;
                }
          - type: custom:button-card
            name: Rooms
            show_icon: true
            icon: mdi:cube-unfolded
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: rooms#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Light Control
            show_icon: true
            icon: mdi:lightbulb-group
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            state:
              - value: 'on'
                styles:
                  card:
                    - background-color: '#FF7000'
            tap_action:
              action: navigate
              navigation_path: lights#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;   

                }  
          - type: custom:button-card
            name: Heating Control
            show_icon: true
            icon: mdi:thermometer-water
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: heating#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px; 
                  background-color: var(--primary-color);     
                }
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:multimedia
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Cameras
            show_icon: true
            icon: mdi:shield
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: cameras#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Power Control
            show_icon: true
            icon: mdi:lightning-bolt
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: power#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Settings
            show_icon: true
            icon: mdi:cog
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px 5px 15px 5px;
                }  
      - type: custom:gap-card
        height: 25
      - type: custom:mushroom-title-card
        title: Klimakontroll
        subtitle: >-

          Klima, temperatur og fuktighet, komfortskala, vannsensorer og
          luftfuktere
        alignment: center
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                  }
                        
        card:
          type: custom:tabbed-card
          options:
            defaultTabIndex: 0
          tabs:
            - attributes:
                label: Temperatur
                icon: mdi:thermometer
              card:
                type: custom:auto-entities
                card:
                  type: custom:mini-graph-card
                  name: Temperaturgraf - siste 36 timer
                  icon: mdi:thermometer
                  chart_type: line
                  period: hour
                  aggregate_func: avg
                  points_per_hour: 2
                  days_to_show: 1.5
                  line_width: 0.75
                  show:
                    fill: false
                    labels: true
                    labels_secondary: false
                    legend: false
                    x_axis: true
                    y_axis: true
                filter:
                  include:
                    - domain: sensor
                      attributes:
                        device_class: temperature
                  exclude:
                    - entity_id: sensor.system_monitor_processor_temperature
                    - entity_id: sensor.temperatur_max
                    - entity_id: sensor.temperature_min
            - attributes:
                label: Fuktighet
                icon: mdi:water-percent
              card:
                type: custom:auto-entities
                card:
                  type: custom:mini-graph-card
                  name: Fuktighetsgraf - siste 36 timer
                  icon: mdi:water-percent
                  chart_type: line
                  period: hour
                  days_to_show: 1.5
                  line_width: 0.75
                  show:
                    fill: false
                    labels: true
                    labels_secondary: false
                    legend: false
                    x_axis: true
                    y_axis: true
                filter:
                  include:
                    - domain: sensor
                      attributes:
                        device_class: humidity
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                      }
                    
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: Klimakontroll
                icon: mdi:fan
              card:
                type: custom:mod-card
                card:
                  type: custom:auto-entities
                  card:
                    title: Klima
                    type: entities
                  filter:
                    template: >-
                      {% set area_filter = ['area1', 'area2'] %} {% set
                      climate_filter = states.climate |
                      map(attribute='entity_id') | list %} {% set areas =
                      states.climate
                        | map(attribute='entity_id')
                        | map('area_name') | unique | reject('none') 
                        | reject('in', area_filter)
                        | list %}

                      {% if areas | length == 0 %}
                        [
                          {
                            'type': 'custom:button-text-card',
                            'title': 'Ingen klimaenheter funnet',
                            'subtitle':'Undersøk om enheten ligger under "Ikke tildelte enheter"',
                            'icon': 'mdi:chat-question',
                            'background_color': 'var(--primary-color)',
                          }
                        ]
                      {% else %}
                        [
                          {%- for area in areas %}
                            {
                                'type': 'custom:button-card',
                                'styles': {
                                  'card': [
                                    { 'height': '5px'},
                                    { 'max-height': '10px'},
                                    { 'padding': '0'},
                                    { 'margin': '0'},
                                    { 'background-color': 'var(--primary-color)'}
                                  ]
                                }
                              },
                            {
                              'type': 'custom:button-text-card',
                              'title': '{{ area }}',
                              'icon': 'mdi:air-conditioner',
                              'background_color': 'var(--primary-color)',
                            },
                            {
                            
                             'type': 'custom:hui-element',
                              'card_type': 'horizontal-stack',
                              'cards': [
                                {%- for device in states.climate
                                   | selectattr('entity_id', 'in', climate_filter)
                                   | selectattr('entity_id', 'in', area_entities(area)) %}
                                  {
                                    'type': 'thermostat',
                                    'entity': '{{ device.entity_id }}',
                                    'name': '{{ device.attributes.friendly_name }}'
                                  }{% if not loop.last %},{% endif %}
                                {%- endfor %}
                              ]
                            }
                            {%- if not loop.last %},{% endif %}
                          {%- endfor %}
                        ]
                      {% endif %}
            - attributes:
                label: Temperatur & fuktighet
                icon: mdi:thermometer
              card:
                type: custom:mod-card
                card:
                  type: custom:auto-entities
                  card:
                    title: Temperatur- og fuktighetsvedier
                    type: entities
                  filter:
                    template: >-
                      {% set area_filter = ['area1', 'area2'] %} {% set
                      temp_filter = ['sensor.temperature_sensor_1',
                      'sensor.temperature_sensor_2'] %} {% set humid_filter =
                      ['sensor.humidity_sensor_1', 'sensor.humidity_sensor_2']
                      %}

                      {%- set areas = states.sensor
                        | selectattr('attributes.device_class', 'in', ['temperature', 'humidity'])
                        | rejectattr('entity_id', 'in', temp_filter + humid_filter)
                        | map(attribute='entity_id')
                        | map('area_name') | unique | reject('none')
                        | reject('in', area_filter)
                        | list -%}

                      {% if areas | length == 0 %}
                        [
                          {
                            'type': 'custom:button-text-card',
                            'title': 'No temperature or humidity sensors found',
                            'subtitle': 'Undersøk om enheten ligger under "Ikke tildelte enheter"',
                            'icon': 'mdi:chat-question',
                            'background_color': 'var(--primary-color)',
                          }
                        ]
                      {% else %}
                        [
                          {%- for area in areas %}
                            {
                                'type': 'custom:button-card',
                                'styles': {
                                  'card': [
                                    { 'height': '5px'},
                                    { 'max-height': '10px'},
                                    { 'padding': '0'},
                                    { 'margin': '0'},
                                    { 'background-color': 'var(--primary-color)'}
                                  ]
                                }
                              },
                            {
                              'type': 'custom:button-text-card',
                              'title': '{{ area }}',
                              'icon': 'mdi:thermometer-water',
                              'background_color': 'var(--primary-color)',
                            },
                            {
                              'type': 'custom:hui-element',
                              'card_type': 'horizontal-stack',
                              'cards': [
                                {%- for sensor in states.sensor
                                   | selectattr('attributes.device_class', 'in', ['temperature', 'humidity'])
                                   | rejectattr('entity_id', 'in', temp_filter + humid_filter)
                                   | selectattr('entity_id', 'in', area_entities(area)) %}
                                  {
                                    'type': 'custom:mini-graph-card',
                                    'animate': 'true',
                                    'height': '40',
                                    'entities': ['{{ sensor.entity_id }}'],
                                    'line_width': '2',
                                    'font_size': '100',
                                    'show': {
                                      'labels': 'true',
                                      'fill': 'true',
                                    },
                                    'points_per_hour': '2',
                                    {% if sensor.attributes.device_class == 'temperature' %}
                                    'color_thresholds': [
                                      { 'value': '0', 'color': '#007BFF' },
                                      { 'value': '15', 'color': '#00CC00' },
                                      { 'value': '20', 'color': '#FFD700' },
                                      { 'value': '25', 'color': '#FF8C00' },
                                      { 'value': '30', 'color': '#FF0000' }          
                                    ]
                                    {% elif sensor.attributes.device_class == 'humidity' %}
                                    'color_thresholds': [
                                      { 'value': '0', 'color': '#007BFF' },
                                      { 'value': '30', 'color': '#00CC00' },
                                      { 'value': '50', 'color': '#FFD700' },
                                      { 'value': '70', 'color': '#FF8C00' },
                                      { 'value': '90', 'color': '#FF0000' }
                                    ]
                                    {% endif %}
                                  }{% if not loop.last %},{% endif %}
                                {%- endfor %}
                              ]
                            }
                            {%- if not loop.last %},{% endif %}
                          {%- endfor %}
                        ]
                      {% endif %}
                    exclude:
                      - hidden_by: '*'
            - attributes:
                label: Komfort
                icon: mdi:home-thermometer-outline
              card:
                type: custom:mod-card
                card:
                  type: custom:auto-entities
                  card:
                    title: Komfortskalering
                    type: entities
                  filter:
                    template: >-
                      {% set area_filter = ['area1', 'area2'] %} {% set
                      temp_filter = ['sensor.temperature_sensor_1',
                      'sensor.temperature_sensor_2'] %} {% set humid_filter =
                      ['sensor.humidity_sensor_1', 'sensor.humidity_sensor_2']
                      %}

                      {%- set areas = states.sensor
                          | selectattr('attributes.device_class', 'in', ['temperature', 'humidity'])
                          | rejectattr('entity_id', 'in', temp_filter + humid_filter)
                          | map(attribute='entity_id')
                          | map('area_name') | unique | reject('none')
                          | reject('in', area_filter)
                          | list -%}

                      {% if areas | length == 0 %}
                        [
                          {
                            'type': 'custom:button-text-card',
                            'title': 'Ingen sensorer funnet',
                            'subtitle':'Kortet krever både temperatur og fuktighetsverdi for et område"',
                            'icon': 'mdi:chat-question',
                            'background_color': 'var(--primary-color)',
                          }
                        ]
                      {% else %}
                        [
                          {%- for area in areas %}
                            {% set temperatures = states.sensor
                                | selectattr('attributes.device_class', 'eq', 'temperature')
                                | rejectattr('entity_id', 'in', temp_filter)
                                | selectattr('entity_id', 'in', area_entities(area))
                                | list -%}
                            {% set humidities = states.sensor
                                | selectattr('attributes.device_class', 'eq', 'humidity')
                                | rejectattr('entity_id', 'in', humid_filter)
                                | selectattr('entity_id', 'in', area_entities(area))
                                | list -%}
                            
                            {%- if temperatures and humidities -%}
                              {
                                'type': 'custom:button-card',
                                'styles': {
                                  'card': [
                                    { 'height': '5px' },
                                    { 'max-height': '10px' },
                                    { 'padding': '0' },
                                    { 'margin': '0' },
                                    { 'background-color': 'var(--primary-color)' }
                                  ]
                                }
                              },
                              {
                                'type': 'custom:button-text-card',
                                'title': '{{ area }}',
                                'icon': 'mdi:thermometer',
                                'background_color': 'var(--primary-color)',
                              },
                              {
                                'type': 'custom:hui-element',
                                'card_type': 'horizontal-stack',
                                'cards': [
                                  {
                                    'type': 'custom:comfortable-environment-card',
                                    'temperature_sensor': '{{ temperatures[0].entity_id }}',
                                    'humidity_sensor': '{{ humidities[0].entity_id }}',
                                    'name': '{{ area }}',
                                    'room_name': '{{ area }}',
                                    'show_index': 'ALL',
                                    'styles': {
                                      'card': [
                                        { 'height': '70px' },
                                        { 'padding': '5px' },
                                        { 'margin-top': '50px' },
                                        { 'max-height': '70px' },
                                        { 'border-radius': '20px' },
                                        { 'transition': 'transform 0.3s ease' }
                                      ]
                                    }
                                  }
                                ]
                              }
                              {%- if not loop.last %},{% endif %}
                            {%- endif %}
                          {%- endfor %}
                        ]
                      {% endif %}
                  exclude:
                    - hidden_by: '*'
            - attributes:
                label: Vann
                icon: mdi:water
              card:
                type: custom:mod-card
                card:
                  type: custom:auto-entities
                  card:
                    title: Vanndetektorer
                    type: entities
                  filter:
                    template: >-
                      {% set area_filter = ['area1', 'area2'] %} {% set
                      moisture_filter = states.binary_sensor
                          | selectattr('attributes.device_class', 'eq', 'moisture')
                          | map(attribute='entity_id') | list %}
                      {% set areas = states.binary_sensor
                          | selectattr('attributes.device_class', 'eq', 'moisture')
                          | map(attribute='entity_id')
                          | map('area_name') | unique | reject('none')
                          | reject('in', area_filter)
                          | list %}

                      {% if areas | length == 0 %}
                        [
                          {
                            'type': 'custom:button-text-card',
                            'title': 'Ingen vanndetektorer funnet',
                            'subtitle':'Undersøk om enheten ligger under "ikke tildelte enheter"',
                            'icon': 'mdi:chat-question',
                            'background_color': 'var(--primary-color)'
                          }
                        ]
                      {% else %}
                        [
                          {%- for area in areas %}
                            {
                              'type': 'custom:button-card',
                              'styles': {
                                'card': [
                                  { 'height': '5px' },
                                  { 'max-height': '10px' },
                                  { 'padding': '0' },
                                  { 'margin': '0' },
                                  { 'background-color': 'var(--primary-color)' }
                                ]
                              }
                            },
                            {
                              'type': 'custom:button-text-card',
                              'title': '{{ area }}',
                              'icon': 'mdi:eye-circle-outline',
                              'background_color': 'var(--primary-color)'
                            },
                            {
                              'type': 'custom:hui-element',
                              'card_type': 'horizontal-stack',
                              'cards': [
                                {%- for sensor in states.binary_sensor
                                    | selectattr('entity_id', 'in', moisture_filter)
                                    | selectattr('entity_id', 'in', area_entities(area)) %}
                                  {
                                    'type': 'custom:mushroom-entity-card',
                                    'entity': '{{ sensor.entity_id }}'
                                  }{% if not loop.last %},{% endif %}
                                {%- endfor %}
                              ]
                            }
                            {%- if not loop.last %},{% endif %}
                          {%- endfor %}
                        ]
                      {% endif %}
                  exclude:
                    - hidden_by: '*'
            - attributes:
                label: Lufktfuktiere
                icon: mdi:air-humidifier
              card:
                type: custom:mod-card
                card:
                  type: custom:auto-entities
                  card:
                    title: Luftfuktere
                    type: entities
                  filter:
                    template: |-
                      {% set humidifier_filter = states.humidifier
                          | map(attribute='entity_id') | list %}

                      {%- set areas = states.humidifier
                          | map(attribute='entity_id')
                          | map('area_name') | unique | reject('none')
                          | reject('in', area_filter)
                          | list -%}

                      {% if areas | length == 0 %}
                        [
                          {
                            'type': 'custom:button-text-card',
                            'title': 'Ingen luftfuktere funnet',
                            'subtitle':'Undersøk om enheten ligger under "ikke tildelte enheter"',
                            'icon': 'mdi:chat-question',
                            'background_color': 'var(--primary-color)'
                          }
                        ]
                      {% else %}
                        [
                          {%- for area in areas %}
                            {% set humidifiers = states.humidifier
                                | selectattr('entity_id', 'in', humidifier_filter)
                                | selectattr('entity_id', 'in', area_entities(area))
                                | list -%}

                            {
                              'type': 'custom:button-text-card',
                              'title': '{{ area }}',
                              'icon': 'mdi:air-humidifier',
                              'background_color': 'var(--primary-color)'
                            },
                            {%- for humidifier in humidifiers %}
                              {
                                'type': 'custom:mushroom-humidifier-card',
                                'entity': '{{ humidifier.entity_id }}'
                              }{%- if not loop.last %},{% endif %}
                            {%- endfor %}
                            {%- if not loop.last %},{% endif %}
                          {%- endfor %}
                        ]
                      {% endif %}
                  exclude:
                    - hidden_by: '*'
    background:
      image: /api/image/serve/4fd1dce7af4fd5ef8bb1aab18a775651/original
  - title: Misc
    path: multimedia
    icon: mdi:multimedia
    type: custom:horizontal-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: horizontal-stack
          cards:
            - type: custom:gap-card
            - type: custom:button-card
              name: Internett
              icon: mdi:wifi
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              entity: binary_sensor.8_8_8_8
              tap_action:
                action: url
                url_path: https://www.smarti.dev
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: custom:button-card
              name: Alarm
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              tap_action:
                action: more-info
                entity: alarm_control_panel.alarmo
              entity: alarm_control_panel.alarmo
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_motion_sensors
                  above: 0
              card:
                type: custom:button-card
                name: Bevegelse
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive bevegelsedetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: motion
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_motion_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_lights
              card:
                type: custom:button-card
                name: Lys
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive lys
                      content:
                        type: custom:auto-entities
                        show_empty: false
                        card:
                          show_name: true
                          show_icon: true
                          show_state: true
                          type: glance
                          title: Lights on
                          state_color: true
                          columns: 4
                        filter:
                          include:
                            - domain: light
                              state: 'on'
                              options:
                                tap_action:
                                  action: toggle
                        sort:
                          method: none
                          reverse: false
                          numeric: false
                entity: sensor.active_lights
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_doors
              card:
                type: custom:button-card
                name: Dører
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne dører
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: door
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_doors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_windows
                  above: 0
              card:
                type: custom:button-card
                name: Vinduer
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)'
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne Vinduer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: window
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_windows
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_water_sensors
              card:
                type: custom:button-card
                name: Vann
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Vanndetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: moisture
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_water_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_smoke_detectors
                  above: 0
              card:
                type: custom:button-card
                name: Røyk
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Røykdetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: smoke
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_smoke_detectors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_gas_sensors
              card:
                type: custom:button-card
                name: Gass
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Gassdetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: gas
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_gas_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_low_battery_devices_count
              card:
                type: custom:button-card
                name: Batterier
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Batterier
                      content:
                        type: custom:auto-entities
                        card:
                          show_header_toggle: false
                          type: entities
                          state_color: true
                        filter:
                          include:
                            - entity_id: sensor.*_battery
                            - entity_id: binary_sensor.*battery_low
                            - entity_id: sensor.*.battery_state
                          exclude:
                            - state: unavailable
                            - state: '-'
                            - state: unknown
                            - state: none
                            - state: '= 0,0'
                            - state: '>= 20'
                            - state: 'off'
                            - entity_id: sensor.campainha_ring_mqtt_battery
                            - entity_id: sensor.campainha_battery
                            - state: None
                            - state: charging
                            - state: discharging
                            - state: high
                            - name: /[Ll]ow/
                            - name: /[Ss]tate/
                        sort:
                          method: friendly_name
                          numeric: true
                          ignore_case: false
                          ip: false
                          reverse: false
                        show_empty: false
                entity: sensor.active_low_battery_devices_count
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unknown
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unavailable
              card:
                type: custom:mini-graph-card
                entities:
                  - sensor.dynamic_power_sensor
                name: Forbruk
                height: 50
                color_thresholds:
                  - value: 3000
                    color: '#f39c12'
                  - value: 5000
                    color: '#d35400'
                  - value: 8000
                    color: '#c0392b'
                hours_to_show: 6
                points_per_hour: 10
                align_icon: right
                align_state: right
                align_header: right
                show:
                  name: true
                  legend: true
                  icon: false
                  labels: false
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                      background: transparent;
                      color: var(--primary-color);
                    }
                    .graph {
                      mask-image: linear-gradient(to right, transparent, black);
                    }
            - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Home
            show_icon: true
            icon: mdi:home
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: home#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 15px;
                }
          - type: custom:button-card
            name: Rooms
            show_icon: true
            icon: mdi:cube-unfolded
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: rooms#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Light Control
            show_icon: true
            icon: mdi:lightbulb-group
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            state:
              - value: 'on'
                styles:
                  card:
                    - background-color: '#FF7000'
            tap_action:
              action: navigate
              navigation_path: lights#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;   

                }  
          - type: custom:button-card
            name: Heating Control
            show_icon: true
            icon: mdi:thermometer-water
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: heating#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;  
                }
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:multimedia
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                  background-color: var(--primary-color);  
                }
          - type: custom:button-card
            name: Cameras
            show_icon: true
            icon: mdi:shield
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: cameras#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Power Control
            show_icon: true
            icon: mdi:lightning-bolt
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: power#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Settings
            show_icon: true
            icon: mdi:cog
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px 5px 15px 5px;
                }  
      - type: custom:gap-card
        height: 25
      - type: custom:mushroom-title-card
        title: Diverse
        subtitle: |-

          Multimedia, brytere, støvsugere & perisenner og rullgardiner
        alignment: center
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                      }
                    
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: Multimedia
                icon: mdi:multimedia
              card:
                type: custom:auto-entities
                card:
                  title: Mediaspillere
                  type: entities
                filter:
                  template: >-
                    {% set area_filter = ['area1', 'area2'] %}

                    {# Filter for media player devices #} {% set media_filter =
                    states.media_player | map(attribute='entity_id') | list %}

                    {%- set areas = states.media_player
                      | map(attribute='entity_id')
                      | map('area_name') | unique | reject('none') 
                      | reject('in', area_filter)
                      | list -%}

                    {% if areas | length == 0 %}
                      [
                        {
                          'type': 'custom:button-text-card',
                          'title': 'Ingen mediaspillere funnet',
                          'subtitle':'Undersøk om enheten ligger under "Ikke tildelte enheter"',
                          'icon': 'mdi:chat-question',
                          'background_color': 'var(--primary-color)'
                        }
                      ]
                    {% else %}
                      [
                        {%- for area in areas %}
                          {
                            'type': 'custom:button-card',
                            'styles': {
                              'card': [
                                { 'height': '5px' },
                                { 'max-height': '10px' },
                                { 'padding': '0' },
                                { 'margin': '0' },
                                { 'background-color': 'var(--primary-color)' }
                              ]
                            }
                          },
                          {
                            'type': 'custom:button-text-card',
                            'title': '{{ area }}',
                            'icon': 'mdi:multimedia',
                            'background_color': 'var(--primary-color)'
                          },
                          {
                            'type': 'custom:hui-element',
                            'card_type': 'horizontal-stack',
                            'cards': [
                              {%- for device in states.media_player
                                  | selectattr('entity_id', 'in', media_filter)
                                  | selectattr('entity_id', 'in', area_entities(area)) %}
                                {
                                  'type': 'custom:mushroom-media-player-card',
                                  'volume_controls': ['volume_mute', 'volume_set', 'volume_buttons'],
                                  'media_controls': ['on_off', 'shuffle', 'previous', 'play_pause_stop', 'next', 'repeat'],
                                  'entity': '{{ device.entity_id }}'
                                }{% if not loop.last %},{% endif %}
                              {%- endfor %}
                            ]
                          }
                          {%- if not loop.last %},{% endif %}
                        {%- endfor %}
                      ]
                    {% endif %}
                exclude:
                  - hidden_by: '*'
            - attributes:
                label: Brytere
                icon: mdi:dip-switch
              card:
                type: custom:mod-card
                card:
                  type: custom:auto-entities
                  card:
                    title: Bryterkontroll
                    type: entities
                  filter:
                    template: >-
                      {% set area_filter = ['area1','area2'] %} {% set filter =
                      ['switch.switch1','switch.switch2'] %} {%- set areas =
                      states.switch | rejectattr('entity_id', 'in', filter) |
                      map(attribute='entity_id') | map('area_name') | unique |
                      reject('none')  | reject('in', area_filter)      | list
                      -%}      

                      {%- for area in areas  -%} {% set switches = states.switch
                      | rejectattr('entity_id', 'in', filter) |
                      selectattr('entity_id', 'in', area_entities(area))  | list
                      -%}

                        {{{ 'type': 'custom:button-text-card',
                            'title': area,
                            'icon': 'mdi:toggle-switch',
                            'background_color': 'var(--primary-color)',
                        }}},
                        
                        {%- for switch in switches  -%}
                            {{{ 'type': 'custom:mushroom-entity-card',              
                                'entity': switch.entity_id,
                                'show_icon': 'true',
                                'show_name': 'true',
                                'show_state': 'true'
                                }}},

                        {%- endfor %}{%- endfor %}                    
                    exclude:
                      - hidden_by: '*'
            - attributes:
                label: Støvsugere
                icon: mdi:robot-vacuum
              card:
                type: custom:mod-card
                card:
                  type: custom:auto-entities
                  card:
                    title: Støvsugere
                    type: entities
                  filter:
                    template: >-
                      {% set area_filter = ['area1', 'area2'] %}

                      {# Filter for vacuum devices #} {% set vacuum_filter =
                      states.vacuum | map(attribute='entity_id') | list %}

                      {%- set areas = states.vacuum
                        | map(attribute='entity_id')
                        | map('area_name') | unique | reject('none') 
                        | reject('in', area_filter)
                        | list -%}

                      {% if areas | length == 0 %}
                        {{{ 'type': 'custom:button-text-card',
                            'title': 'Ingen støvsugere funnet',
                            'subtitle':'Undersøk om enheten ligger under "Ikke tildelte enheter"',
                            'icon': 'mdi:chat-question',
                            'background_color': 'var(--primary-color)',
                        }}},
                      {% else %}   

                      {%- for area in areas -%}
                        {% set vacuums = states.vacuum
                          | selectattr('entity_id', 'in', vacuum_filter)
                          | selectattr('entity_id', 'in', area_entities(area)) | list -%}

                              {{{ 'type': 'custom:button-text-card',
                                  'title': area,
                                  'icon': 'mdi:robot-vacuum',
                                  'background_color': 'var(--primary-color)',
                              }}},

                        {%- for vacuum in vacuums -%}
                          {{{ 'type': 'custom:mushroom-vacuum-card',
                              'entity': vacuum.entity_id }}},
                        {%- endfor %}
                      {%- endfor %} {%- endif %}
                    exclude:
                      - hidden_by: '*'
            - attributes:
                label: Persienner & rullgardiner
                icon: mdi:window-shutter
              card:
                type: custom:mod-card
                card:
                  type: custom:auto-entities
                  card:
                    title: Persienne- og rullgardinkontroll
                    type: entities
                  filter:
                    template: |-
                      {% set area_filter = ['area1', 'area2'] %}

                      {# Filter for cover devices #} {% set vacuum_filter =
                      states.cover | map(attribute='entity_id') | list %}

                      {%- set areas = states.cover
                        | map(attribute='entity_id')
                        | map('area_name') | unique | reject('none') 
                        | reject('in', area_filter)
                        | list -%}

                      {% if areas | length == 0 %}
                        [
                          {
                            'type': 'custom:button-text-card',
                            'title': 'Ingen persienner eller rullgardiner funnet',
                            'subtitle':'Undersøk om enheten ligger under "Ikke tildelte enheter"',
                            'icon': 'mdi:chat-question',
                            'background_color': 'var(--primary-color)'
                          }
                        ]
                      {% else %}
                        [
                          {%- for area in areas %}
                            {
                              'type': 'custom:button-card',
                              'styles': {
                                'card': [
                                  { 'height': '5px' },
                                  { 'max-height': '10px' },
                                  { 'padding': '0' },
                                  { 'margin': '0' },
                                  { 'background-color': 'var(--primary-color)' }
                                ]
                              }
                            },
                            {
                              'type': 'custom:button-text-card',
                              'title': '{{ area }}',
                              'icon': 'mdi:window-shutter',
                              'background_color': 'var(--primary-color)'
                            },
                            {
                              'type': 'custom:hui-element',
                              'card_type': 'horizontal-stack',
                              'cards': [
                                {%- for cover in states.cover
                                    | selectattr('entity_id', 'in', vacuum_filter)
                                    | selectattr('entity_id', 'in', area_entities(area)) %}
                                  {
                                    'type': 'custom:mushroom-cover-card',
                                    'entity': '{{ cover.entity_id }}',
                                    'show_position_control': 'true',
                                    'show_tilt_position_control': 'false',
                                    'show_buttons_control': 'true'
                                  }{% if not loop.last %},{% endif %}
                                {%- endfor %}
                              ]
                            }
                            {%- if not loop.last %},{% endif %}
                          {%- endfor %}
                        ]
                      {% endif %}
                  exclude:
                    - hidden_by: '*'
    background:
      image: /api/image/serve/f97571d02082c2d10ce0e7d39864f900/original
  - title: Security
    path: cameras
    icon: mdi:shield
    type: custom:horizontal-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: horizontal-stack
          cards:
            - type: custom:gap-card
            - type: custom:button-card
              name: Internett
              icon: mdi:wifi
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              entity: binary_sensor.8_8_8_8
              tap_action:
                action: url
                url_path: https://www.smarti.dev
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: custom:button-card
              name: Alarm
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              tap_action:
                action: more-info
                entity: alarm_control_panel.alarmo
              entity: alarm_control_panel.alarmo
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_motion_sensors
                  above: 0
              card:
                type: custom:button-card
                name: Bevegelse
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive bevegelsedetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: motion
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_motion_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_lights
              card:
                type: custom:button-card
                name: Lys
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive lys
                      content:
                        type: custom:auto-entities
                        show_empty: false
                        card:
                          show_name: true
                          show_icon: true
                          show_state: true
                          type: glance
                          title: Lights on
                          state_color: true
                          columns: 4
                        filter:
                          include:
                            - domain: light
                              state: 'on'
                              options:
                                tap_action:
                                  action: toggle
                        sort:
                          method: none
                          reverse: false
                          numeric: false
                entity: sensor.active_lights
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_doors
              card:
                type: custom:button-card
                name: Dører
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne dører
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: door
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_doors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_windows
                  above: 0
              card:
                type: custom:button-card
                name: Vinduer
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)'
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne Vinduer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: window
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_windows
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_water_sensors
              card:
                type: custom:button-card
                name: Vann
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Vanndetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: moisture
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_water_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_smoke_detectors
                  above: 0
              card:
                type: custom:button-card
                name: Røyk
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Røykdetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: smoke
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_smoke_detectors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_gas_sensors
              card:
                type: custom:button-card
                name: Gass
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Gassdetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: gas
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_gas_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_low_battery_devices_count
              card:
                type: custom:button-card
                name: Batterier
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Batterier
                      content:
                        type: custom:auto-entities
                        card:
                          show_header_toggle: false
                          type: entities
                          state_color: true
                        filter:
                          include:
                            - entity_id: sensor.*_battery
                            - entity_id: binary_sensor.*battery_low
                            - entity_id: sensor.*.battery_state
                          exclude:
                            - state: unavailable
                            - state: '-'
                            - state: unknown
                            - state: none
                            - state: '= 0,0'
                            - state: '>= 20'
                            - state: 'off'
                            - entity_id: sensor.campainha_ring_mqtt_battery
                            - entity_id: sensor.campainha_battery
                            - state: None
                            - state: charging
                            - state: discharging
                            - state: high
                            - name: /[Ll]ow/
                            - name: /[Ss]tate/
                        sort:
                          method: friendly_name
                          numeric: true
                          ignore_case: false
                          ip: false
                          reverse: false
                        show_empty: false
                entity: sensor.active_low_battery_devices_count
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unknown
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unavailable
              card:
                type: custom:mini-graph-card
                entities:
                  - sensor.dynamic_power_sensor
                name: Forbruk
                height: 50
                color_thresholds:
                  - value: 3000
                    color: '#f39c12'
                  - value: 5000
                    color: '#d35400'
                  - value: 8000
                    color: '#c0392b'
                hours_to_show: 6
                points_per_hour: 10
                align_icon: right
                align_state: right
                align_header: right
                show:
                  name: true
                  legend: true
                  icon: false
                  labels: false
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                      background: transparent;
                      color: var(--primary-color);
                    }
                    .graph {
                      mask-image: linear-gradient(to right, transparent, black);
                    }
            - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Home
            show_icon: true
            icon: mdi:home
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: home#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 15px;
                }
          - type: custom:button-card
            name: Rooms
            show_icon: true
            icon: mdi:cube-unfolded
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: rooms#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Light Control
            show_icon: true
            icon: mdi:lightbulb-group
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            state:
              - value: 'on'
                styles:
                  card:
                    - background-color: '#FF7000'
            tap_action:
              action: navigate
              navigation_path: lights#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;   

                }  
          - type: custom:button-card
            name: Heating Control
            show_icon: true
            icon: mdi:thermometer-water
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: heating#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;      
                }
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:multimedia
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Cameras
            show_icon: true
            icon: mdi:shield
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: cameras#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                  background-color: var(--primary-color);          
                }
          - type: custom:button-card
            name: Power Control
            show_icon: true
            icon: mdi:lightning-bolt
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: power#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Settings
            show_icon: true
            icon: mdi:cog
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px 5px 15px 5px;
                }  
      - type: custom:gap-card
        height: 25
      - type: custom:mushroom-title-card
        title: Sikkerhet
        subtitle: |-

          Alarm, Kameraer, Åpninger, Låser & Røyk- og gassdetektorer
        alignment: center
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                      }
                         
        card:
          type: custom:tabbed-card
          styles: null
          '--mdc-theme-primary': yellow
          '--mdc-tab-text-label-color-default': orange
          tabs:
            - attributes:
                label: Alarm
                icon: mdi:shield
              card:
                type: vertical-stack
                cards:
                  - type: custom:gap-card
                  - type: vertical-stack
                    cards:
                      - type: custom:alarmo-card
                        entity: alarm_control_panel.alarmo
                        button_scale_keypad: 1.5
                        use_clear_icon: true
                        name: Alarm
                        button_scale_actions: 1.5
                      - type: custom:button-card
                        name: Konfigurer alarm
                        show_icon: true
                        icon: mdi:shield-account
                        show_name: true
                        styles:
                          card:
                            - height: 65px
                            - max-height: 65px
                            - padding: 10px
                            - margin: 0
                            - border-width: 2px;
                            - color: var(--ha-card-background)
                          icon:
                            - color: var(--primary-color)
                          text:
                            - color: var(--primary-color)
                        card_mod:
                          style: |
                            ha-card {
                              height: 65px;
                              max-height: 65px;
                              padding: 0;
                              margin: 0;
                              border-radius: 10px;
                              --ha-card-background: var(--ha-card-background) !important;
                            }
                        tap_action:
                          action: navigate
                          navigation_path: /alarmo
            - attributes:
                label: Kamera
                icon: mdi:cctv
              card:
                type: custom:mod-card
                card_mod:
                  style:
                    .: |
                      ha-card {
                        --ha-card-border-radius: 20px;
                      }
                card:
                  type: custom:auto-entities
                  filter:
                    include:
                      - domain: camera
                        options:
                          type: picture-entity
                          camera_view: live
                          show_state: false
                          show_name: false
                  card:
                    type: grid
                    square: false
                    columns: 1
                    card_mod: null
                    style: null
                  card_param: cards
            - attributes:
                label: Dører & vinduer
                icon: mdi:door-closed
              card:
                type: custom:mod-card
                card:
                  type: custom:mod-card
                  card:
                    type: custom:auto-entities
                    card:
                      type: entities
                    filter:
                      template: >-
                        {% set area_filter = ['area1', 'area2'] %} {% set
                        door_filter = ['binary_sensor.door_sensor_1',
                        'binary_sensor.door_sensor_2'] %} {% set window_filter =
                        ['binary_sensor.window_sensor_1',
                        'binary_sensor.window_sensor_2'] %}

                        {%- set areas = states.binary_sensor
                          | selectattr('attributes.device_class', 'in', ['door', 'window'])
                          | rejectattr('entity_id', 'in', door_filter + window_filter)
                          | map(attribute='entity_id')
                          | map('area_name') | unique | reject('none') 
                          | reject('in', area_filter)
                          | list -%}

                        {% if areas | length == 0 %}
                          [
                            {
                              'type': 'custom:button-text-card',
                              'title': 'Ingen dør- eller vidusensorer funnet',
                              'subtitle':'Undersøk om enheten ligger under "Ikke tildelte enheter"',
                              'icon': 'mdi:chat-question',
                              'background_color': 'var(--primary-color)'
                            }
                          ]
                        {% else %}
                          [
                            {%- for area in areas %}
                            {
                                'type': 'custom:button-card',
                                'styles': {
                                  'card': [
                                    { 'height': '5px'},
                                    { 'max-height': '10px'},
                                    { 'padding': '0'},
                                    { 'margin': '0'},
                                    { 'background-color': 'var(--primary-color)'}
                                  ]
                                }
                              },
                              {
                                'type': 'custom:button-text-card',
                                'title': '{{ area }}',
                                'icon': 'mdi:door-open',
                                'background_color': 'var(--primary-color)'
                              },

                              {
                                'type': 'custom:hui-element',
                                'card_type': 'horizontal-stack',
                                'cards': [
                                  {%- for sensor in states.binary_sensor
                                     | selectattr('attributes.device_class', 'in', ['door', 'window'])
                                     | rejectattr('entity_id', 'in', door_filter + window_filter)
                                     | selectattr('entity_id', 'in', area_entities(area)) %}
                                    {
                                      'type': 'custom:mushroom-entity-card',
                                      'entity': '{{ sensor.entity_id }}'
                                    }{% if not loop.last %},{% endif %}
                                  {%- endfor %}
                                ]
                              }
                              {%- if not loop.last %},{% endif %}
                            {%- endfor %}
                          ]
                        {% endif %}
            - attributes:
                label: Låser
                icon: mdi:lock
              card:
                type: custom:auto-entities
                card:
                  title: Låser
                  type: entities
                filter:
                  template: >-
                    {% set area_filter = ['area1', 'area2'] %}

                    {% set lock_filter = ['binary_sensor.lock_sensor_1',
                    'binary_sensor.lock_sensor_2'] %}

                    {%- set areas = states.binary_sensor
                      | selectattr('attributes.device_class', 'eq', 'lock')
                      | rejectattr('entity_id', 'in', lock_filter)
                      | map(attribute='entity_id')
                      | map('area_name') | unique | reject('none') 
                      | reject('in', area_filter)
                      | list -%}

                    {% if areas | length == 0 %}
                      {{{ 'type': 'custom:button-text-card',
                          'title': 'Ingen låser funnet',
                          'subtitle':'Undersøk om enheten ligger under "Ikke tildelte enheter"',
                          'icon': 'mdi:chat-question',
                          'background_color': 'var(--primary-color)',
                      }}},
                    {% else %}
                      {%- for area in areas -%}
                      
                        {
                            'type': 'custom:button-card',
                            'styles': {
                              'card': [
                                { 'height': '5px'},
                                { 'max-height': '10px'},
                                { 'padding': '0'},
                                { 'margin': '0'},
                                { 'background-color': 'var(--primary-color)'}
                              ]
                            }
                          },

                        {% set locks = states.binary_sensor
                          | selectattr('attributes.device_class', 'eq', 'lock')
                          | rejectattr('entity_id', 'in', lock_filter)
                          | selectattr('entity_id', 'in', area_entities(area))
                          | list -%}

                        {{{ 'type': 'custom:button-text-card',
                            'title': area,
                            'icon': 'mdi:lock',
                            'background_color': 'var(--primary-color)',
                        }}},

                        {%- for sensor in locks -%}
                          {{{ 'type': 'custom:mushroom-lock-card',
                              'entity': sensor.entity_id }}},
                        {%- endfor %}
                      {%- endfor %}
                    {% endif %}
            - attributes:
                label: Røyk- og gassdetektorer
                icon: mdi:smoke-detector-variant
              card:
                type: custom:auto-entities
                card:
                  title: Detektorer
                  type: entities
                filter:
                  template: |-
                    {% set areas = states.binary_sensor
                      | selectattr('attributes.device_class', 'in', ['smoke', 'gas'])
                      | map(attribute='entity_id')
                      | map('area_name') | unique | reject('none') 
                      | list -%}
                    {% if areas | length == 0 %}
                      [
                        {
                          'type': 'custom:button-text-card',
                          'title': 'Ingen detekotrer funnet',
                          'subtitle':'Undersøk om enheten ligger under "Ikke tildelte enheter"',
                          'icon': 'mdi:chat-question',
                          'background_color': 'var(--primary-color)'
                        }
                      ]
                    {% else %}
                      [
                        {%- for area in areas %}
                          {
                            'type': 'custom:button-card',
                            'styles': {
                              'card': [
                                { 'height': '5px' },
                                { 'max-height': '10px' },
                                { 'padding': '0' },
                                { 'margin': '0' },
                                { 'background-color': 'var(--primary-color)' }
                              ]
                            }
                          },
                          {
                            'type': 'custom:button-text-card',
                            'title': '{{ area }}',
                            'icon': 'mdi:smoke-detector-variant',
                            'background_color': 'var(--primary-color)'
                          },
                          {
                            'type': 'custom:hui-element',
                            'card_type': 'horizontal-stack',
                            'cards': [
                              {%- for sensor in states.binary_sensor
                                  | selectattr('attributes.device_class', 'eq', 'smoke')
                                  | selectattr('entity_id', 'in', area_entities(area)) %}
                                {
                                  'type': 'custom:mushroom-entity-card',
                                  'entity': '{{ sensor.entity_id }}',
                                  'icon_color': 'primary'
                                }{% if not loop.last %},{% endif %}
                              {%- endfor %}
                            ]
                          },
                          {
                            'type': 'custom:hui-element',
                            'card_type': 'horizontal-stack',
                            'cards': [
                              {%- for sensor in states.binary_sensor
                                  | selectattr('attributes.device_class', 'eq', 'gas')
                                  | selectattr('entity_id', 'in', area_entities(area)) %}
                                {
                                  'type': 'custom:mushroom-entity-card',
                                  'entity': '{{ sensor.entity_id }}'
                                }{% if not loop.last %},{% endif %}
                              {%- endfor %}
                            ]
                          }
                          {%- if not loop.last %},{% endif %}
                        {%- endfor %}
                      ]
                    {% endif %}
                exclude:
                  - hidden_by: '*'
    background:
      image: /api/image/serve/84fb008bb1e9ae5dbd82bd103ae09f61/original
  - title: Energy
    path: power
    icon: mdi:lightning-bolt
    type: custom:horizontal-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: horizontal-stack
          cards:
            - type: custom:gap-card
            - type: custom:button-card
              name: Internett
              icon: mdi:wifi
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              entity: binary_sensor.8_8_8_8
              tap_action:
                action: url
                url_path: https://www.smarti.dev
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: custom:button-card
              name: Alarm
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              tap_action:
                action: more-info
                entity: alarm_control_panel.alarmo
              entity: alarm_control_panel.alarmo
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_motion_sensors
                  above: 0
              card:
                type: custom:button-card
                name: Bevegelse
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive bevegelsedetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: motion
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_motion_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_lights
              card:
                type: custom:button-card
                name: Lys
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive lys
                      content:
                        type: custom:auto-entities
                        show_empty: false
                        card:
                          show_name: true
                          show_icon: true
                          show_state: true
                          type: glance
                          title: Lights on
                          state_color: true
                          columns: 4
                        filter:
                          include:
                            - domain: light
                              state: 'on'
                              options:
                                tap_action:
                                  action: toggle
                        sort:
                          method: none
                          reverse: false
                          numeric: false
                entity: sensor.active_lights
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_doors
              card:
                type: custom:button-card
                name: Dører
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne dører
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: door
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_doors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_windows
                  above: 0
              card:
                type: custom:button-card
                name: Vinduer
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)'
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne Vinduer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: window
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_windows
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_water_sensors
              card:
                type: custom:button-card
                name: Vann
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Vanndetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: moisture
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_water_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_smoke_detectors
                  above: 0
              card:
                type: custom:button-card
                name: Røyk
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Røykdetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: smoke
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_smoke_detectors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_gas_sensors
              card:
                type: custom:button-card
                name: Gass
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Gassdetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: gas
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_gas_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_low_battery_devices_count
              card:
                type: custom:button-card
                name: Batterier
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Batterier
                      content:
                        type: custom:auto-entities
                        card:
                          show_header_toggle: false
                          type: entities
                          state_color: true
                        filter:
                          include:
                            - entity_id: sensor.*_battery
                            - entity_id: binary_sensor.*battery_low
                            - entity_id: sensor.*.battery_state
                          exclude:
                            - state: unavailable
                            - state: '-'
                            - state: unknown
                            - state: none
                            - state: '= 0,0'
                            - state: '>= 20'
                            - state: 'off'
                            - entity_id: sensor.campainha_ring_mqtt_battery
                            - entity_id: sensor.campainha_battery
                            - state: None
                            - state: charging
                            - state: discharging
                            - state: high
                            - name: /[Ll]ow/
                            - name: /[Ss]tate/
                        sort:
                          method: friendly_name
                          numeric: true
                          ignore_case: false
                          ip: false
                          reverse: false
                        show_empty: false
                entity: sensor.active_low_battery_devices_count
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unknown
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unavailable
              card:
                type: custom:mini-graph-card
                entities:
                  - sensor.dynamic_power_sensor
                name: Forbruk
                height: 50
                color_thresholds:
                  - value: 3000
                    color: '#f39c12'
                  - value: 5000
                    color: '#d35400'
                  - value: 8000
                    color: '#c0392b'
                hours_to_show: 6
                points_per_hour: 10
                align_icon: right
                align_state: right
                align_header: right
                show:
                  name: true
                  legend: true
                  icon: false
                  labels: false
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                      background: transparent;
                      color: var(--primary-color);
                    }
                    .graph {
                      mask-image: linear-gradient(to right, transparent, black);
                    }
            - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Home
            show_icon: true
            icon: mdi:home
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: home#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 15px;
                }
          - type: custom:button-card
            name: Rooms
            show_icon: true
            icon: mdi:cube-unfolded
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: rooms#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Light Control
            show_icon: true
            icon: mdi:lightbulb-group
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            state:
              - value: 'on'
                styles:
                  card:
                    - background-color: '#FF7000'
            tap_action:
              action: navigate
              navigation_path: lights#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;   

                }  
          - type: custom:button-card
            name: Heating Control
            show_icon: true
            icon: mdi:thermometer-water
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: heating#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;      
                }
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:multimedia
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Cameras
            show_icon: true
            icon: mdi:shield
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: cameras#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;          
                }
          - type: custom:button-card
            name: Power Control
            show_icon: true
            icon: mdi:lightning-bolt
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: power#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                  background-color: var(--primary-color);          
                }
          - type: custom:button-card
            name: Settings
            show_icon: true
            icon: mdi:cog
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px 5px 15px 5px;
                }  
      - type: custom:gap-card
        height: 25
      - type: custom:mushroom-title-card
        title: Energi
        subtitle: |-

          Energioversikt, priser, forbruk & mer
        alignment: center
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0px;
                --ha-card-border-color: var(--primary-color);
                --ha-card-border-radius: 5px;
                --ha-card-background: transaprent;
              }
        card:
          type: horizontal-stack
          cards:
            - type: custom:mushroom-entity-card
              entity: input_boolean.powersaver
              name: Powersaver
              layout: vertical
            - type: custom:mushroom-entity-card
              entity: sensor.strompris_effektiv_denne_time
              icon: mdi:currency-usd
              layout: vertical
            - type: custom:mushroom-entity-card
              entity: sensor.current_energy_level
              icon: mdi:currency-usd
              name: Energinivå
              layout: vertical
            - type: custom:mushroom-entity-card
              entity: input_number.energy_target
              icon: mdi:currency-usd
              name: Energinivå
              layout: vertical
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: custom:gap-card
        height: 25
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }          
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: Sanntidsstatistikk
                icon: mdi:lightning-bolt
              card:
                type: vertical-stack
                cards:
                  - type: energy-date-selection
                    card_mod:
                      style:
                        .: |
                          ha-card {
                            display: flex;
                            justify-content: center;
                            align-items: center;
                            flex-direction: column;
                          }
                  - type: energy-distribution
                    link_dashboard: false
                  - type: custom:tabbed-card
                    styles: null
                    '--mdc-theme-primary': yellow
                    '--mdc-tab-text-label-color-default': orange
                    tabs:
                      - attributes:
                          label: Energiforbruk
                          icon: mdi:lightning-bolt
                        card:
                          type: energy-usage-graph
                      - attributes:
                          label: Solproduksjon
                          icon: mdi:solar-power-variant
                        card:
                          type: custom:mod-card
                          card_mod:
                            style:
                              .: |
                                ha-card {
                                  --ha-card-border-radius: 20px;
                                }
                          card:
                            type: energy-solar-graph
                      - attributes:
                          label: Gassforbruk
                          icon: mdi:gas-cylinder
                        card:
                          type: custom:mod-card
                          card:
                            type: energy-gas-graph
                      - attributes:
                          label: Vannforbruk
                          icon: mdi:water
                        card:
                          type: custom:mod-card
                          card_mod:
                            style:
                              .: |
                                ha-card {
                                  --ha-card-border-width: 0;
                                  --ha-card-border-radius: 20px;
                                }
                          card:
                            type: energy-water-graph
                  - type: custom:mini-graph-card
                    name: Forbruk
                    entities:
                      - sensor.dynamic_power_sensor
                    points_per_hour: 10
                    line_width: 1
                    height: 60
                    show:
                      labels: true
                      fill: true
                      average: true
                      extrema: true
                    color_thresholds:
                      - value: 2000
                        color: '#f39c12'
                      - value: 4000
                        color: '#d35400'
                      - value: 8000
                        color: '#c0392b'
                  - type: custom:mushroom-template-card
                    primary: Ingen data? Klikk her
                    secondary: Sett forbrukssensor i energipanelet
                    icon: mdi:chat-question
                    badge_icon: mdi:lightning-bolt
                    badge_color: primary
                    tap_action:
                      action: navigate
                      navigation_path: /energy
                    layout: vertical
            - attributes:
                label: Frobruksstatistikk
                icon: mdi:autorenew
              card:
                type: vertical-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: energy-devices-detail-graph
                        max_devices: 10
                        card: null
                      - type: horizontal-stack
                        cards:
                          - height: 200
                            unit_prefix: k
                            round: 1
                            min_box_height: 5
                            min_box_distance: 5
                            show_states: true
                            show_units: true
                            energy_date_selection: true
                            sections: []
                            type: custom:sankey-chart
                            autoconfig:
                              print_yaml: false
                            min_state: 0
                            wide: true
                            show_names: true
                            show_icons: false
            - attributes:
                label: Pris
                icon: mdi:currency-usd
              card:
                type: vertical-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:apexcharts-card
                        graph_span: 48h
                        header:
                          title: ''
                          show: true
                        span:
                          start: day
                        apex_config:
                          chart:
                            height: 390px
                        now:
                          show: true
                          label: Nå
                        experimental:
                          color_threshold: true
                        yaxis:
                          - id: pris
                            opposite: false
                            decimals: 2
                            min: 0
                            apex_config:
                              tickAmount: 5
                              labels:
                                show: true
                              legend:
                                - show: false
                          - id: powersaver
                            opposite: true
                            decimals: 0
                            apex_config:
                              tickAmount: 7
                              labels:
                                show: false
                              legend:
                                - show: false
                        series:
                          - entity: sensor.strompris_effektiv
                            name: Effektiv Strømpris
                            opacity: 1
                            float_precision: 2
                            extend_to: now
                            yaxis_id: pris
                            curve: smooth
                            color: red
                            stroke_width: 2
                            show:
                              legend_value: false
                              in_header: true
                              name_in_header: false
                              datalabels: false
                            data_generator: |

                              const data = entity.attributes.hours.map(hour => {

                                return [new Date(hour.start), hour.price];

                              });

                              if (data.length > 0) {

                                const lastDataPoint = data[data.length - 1];

                                const lastTime = new Date(lastDataPoint[0]);

                                const nextTime = new Date(lastTime.getTime() + 60 * 60 * 1000); // Legger til en time

                                data.push([nextTime, lastDataPoint[1]]); // Kopierer prisen fra siste datapunkt

                              }

                              return data;
                          - entity: sensor.strompris_nordpool
                            name: Nordpool
                            opacity: 1
                            float_precision: 2
                            extend_to: now
                            yaxis_id: pris
                            curve: smooth
                            color: 6B9EFF
                            stroke_width: 2
                            show:
                              legend_value: false
                              in_header: true
                              name_in_header: false
                              datalabels: false
                            data_generator: |

                              const data = entity.attributes.hours.map(hour => {

                                return [new Date(hour.start), hour.price];

                              });

                              if (data.length > 0) {

                                const lastDataPoint = data[data.length - 1];

                                const lastTime = new Date(lastDataPoint[0]);

                                const nextTime = new Date(lastTime.getTime() + 60 * 60 * 1000); // Legger til en time

                                data.push([nextTime, lastDataPoint[1]]); // Kopierer prisen fra siste datapunkt

                              }

                              return data;
                          - entity: sensor.strompris_stotte
                            name: Strømstøtte
                            opacity: 1
                            float_precision: 2
                            extend_to: now
                            yaxis_id: pris
                            curve: stepline
                            color: green
                            stroke_width: 1
                            show:
                              legend_value: false
                              in_header: true
                              name_in_header: false
                              datalabels: false
                            data_generator: |

                              const data = entity.attributes.hours.map(hour => {

                                return [new Date(hour.start), hour.price];

                              });

                              if (data.length > 0) {

                                const lastDataPoint = data[data.length - 1];

                                const lastTime = new Date(lastDataPoint[0]);

                                const nextTime = new Date(lastTime.getTime() + 60 * 60 * 1000); // Legger til en time

                                data.push([nextTime, lastDataPoint[1]]); // Kopierer prisen fra siste datapunkt

                              }

                              return data;
                          - entity: sensor.strompris_nettleie
                            name: Nettleie
                            opacity: 1
                            float_precision: 2
                            extend_to: now
                            yaxis_id: pris
                            curve: stepline
                            color: FF8800
                            stroke_width: 3
                            show:
                              legend_value: false
                              in_header: true
                              name_in_header: false
                              datalabels: false
                            data_generator: |

                              const data = entity.attributes.hours.map(hour => {

                                return [new Date(hour.start), hour.price];

                              });

                              if (data.length > 0) {

                                const lastDataPoint = data[data.length - 1];

                                const lastTime = new Date(lastDataPoint[0]);

                                const nextTime = new Date(lastTime.getTime() + 60 * 60 * 1000); // Legger til en time

                                data.push([nextTime, lastDataPoint[1]]); // Kopierer prisen fra siste datapunkt

                              }

                              return data;
                      - type: custom:apexcharts-card
                        header:
                          show: true
                          title: Pris i dag + Forbruk + Powersaver
                        now:
                          show: true
                          label: Nå
                        graph_span: 2d
                        span:
                          start: day
                        apex_config:
                          chart:
                            height: 400px
                          stroke:
                            width: 2
                          dataLabels:
                            enabled: true
                          fill:
                            type: gradient
                            gradient:
                              shadeIntensity: 1
                              inverseColors: true
                              opacityFrom: 0.8
                              opacityTo: 0.2
                          legend:
                            show: true
                          yaxis:
                            - id: price
                              show: true
                              min: 0
                              max: 2.5
                              tickAmount: 6
                              opposite: true
                              decimalsInFloat: 1
                              floating: false
                              forceNiceScale: true
                              extend_to: end
                            - id: usage
                              show: true
                              min: sensor.dynamic_power_min
                              max: sensor.dynamic_power_max
                              tickAmount: 6
                              decimalsInFloat: 0
                              floating: false
                              forceNiceScale: true
                              extend_to: end
                            - id: powersaver
                              show: false
                              decimalsInFloat: 0
                              floating: false
                              extend_to: now
                        series:
                          - entity: sensor.strompris_effektiv
                            yaxis_id: price
                            extend_to: now
                            name: Faktisk strømpris
                            type: area
                            curve: stepline
                            color: tomato
                            float_precision: 2
                            show:
                              legend_value: false
                            data_generator: |
                              return entity.attributes.hours.map((entry) => {
                                return [new Date(entry.start), entry.price];
                              });
                          - entity: sensor.dynamic_power_sensor
                            yaxis_id: usage
                            type: column
                            name: Forbruk
                            time_delta: +30m
                            group_by:
                              func: max
                            show:
                              legend_value: true
                          - entity: sensor.powersaver_payload
                            data_generator: |

                              return entity.attributes.hours.map((entry) => {

                                return [new Date(entry.start), entry.onOff];

                              });
                            yaxis_id: powersaver
                            name: Power Saver
                            type: area
                            color: rgb(0, 255, 0)
                            opacity: 0.1
                            stroke_width: 1
                            curve: stepline
                            group_by:
                              func: max
                            show:
                              legend_value: false
                              in_header: false
                              name_in_header: false
                              datalabels: false
            - attributes:
                label: Effektledd og nettleie
                icon: mdi:cog
              card:
                type: vertical-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:mushroom-number-card
                        entity: input_number.energy_target
                        name: Maksgrense per time (KW)
                        icon_color: primary
                      - type: horizontal-stack
                        cards:
                          - type: custom:auto-entities
                            show_empty: false
                            card:
                              type: custom:mushroom-entity-card
                              entity: sensor.dynamic_energy_price_0_2
                              name: Trinn 0-2
                              icon: mdi:currency-usd
                              layout: vertical
                              icon_color: primary
                            filter:
                              include:
                                - entity_id: sensor.current_energy_level
                                  state: 0-2 kWh
                            style:
                              card-mod:
                                style: |
                                  ha-card {
                                    background-color: green !important;
                                  }
                          - type: custom:auto-entities
                            show_empty: false
                            card:
                              type: custom:mushroom-entity-card
                              entity: sensor.dynamic_energy_price_2_5
                              name: Trinn 2-5
                              icon: mdi:currency-usd
                              layout: vertical
                              icon_color: primary
                            filter:
                              include:
                                - entity_id: sensor.current_energy_level
                                  state: 2-5 kWh
                            style:
                              card-mod:
                                style: |
                                  ha-card {
                                    background-color: green !important;
                                  }
                          - type: custom:auto-entities
                            show_empty: false
                            card:
                              type: custom:mushroom-entity-card
                              entity: sensor.dynamic_energy_price_5_10
                              icon: mdi:currency-usd
                              name: Trinn 5-10
                              layout: vertical
                              icon_color: primary
                            filter:
                              include:
                                - entity_id: sensor.current_energy_level
                                  state: 5-10 kWh
                            style:
                              card-mod:
                                style: |
                                  ha-card {
                                    background-color: green !important;
                                  }
                          - type: custom:auto-entities
                            show_empty: false
                            card:
                              type: custom:mushroom-entity-card
                              entity: sensor.dynamic_energy_price_10_15
                              icon: mdi:currency-usd
                              name: Trinn 10 - 15
                              layout: vertical
                              icon_color: primary
                            filter:
                              include:
                                - entity_id: sensor.current_energy_level
                                  state: 10-15 kWh
                            style:
                              card-mod:
                                style: |
                                  ha-card {
                                    background-color: green !important;
                                  }
                          - type: custom:auto-entities
                            show_empty: false
                            card:
                              type: custom:mushroom-entity-card
                              entity: sensor.dynamic_energy_price_15_20
                              name: Trinn 15-20
                              layout: vertical
                              icon: mdi:currency-usd
                              icon_color: primary
                            filter:
                              include:
                                - entity_id: sensor.current_energy_level
                                  state: 15-20 kWh
                            style:
                              card-mod:
                                style: |
                                  ha-card {
                                    background-color: green !important;
                                  }
                          - type: custom:auto-entities
                            show_empty: false
                            card:
                              type: custom:mushroom-entity-card
                              entity: sensor.dynamic_energy_price_15_20
                              name: Above 20 kWh
                              layout: vertical
                              icon: mdi:currency-usd
                              icon_color: primary
                            filter:
                              include:
                                - entity_id: sensor.current_energy_level
                                  state: Above 20 kWh
                            style:
                              card-mod:
                                style: |
                                  ha-card {
                                    background-color: green !important;
                                  }
                      - type: entities
                        entities:
                          - entity: input_number.energy_target
                          - entity: sensor.current_energy_level
                          - entity: sensor.remaining_energy
                          - entity: input_number.peak_day_1
                          - entity: input_number.peak_day_2
                          - entity: input_number.peak_day_3
                          - entity: sensor.monthly_peak_energy
                          - entity: sensor.energy_consumed
                          - entity: sensor.hourly_energy_usage
            - attributes:
                label: Instillinger for strøm
                icon: mdi:lightning-bolt
              card:
                type: vertical-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:gap-card
                      - type: horizontal-stack
                        cards:
                          - type: custom:mushroom-select-card
                            entity: input_select.home_power_measurement_device
                            icon_color: primary
                            primary_info: name
                            secondary_info: last-changed
                            name: Strømmålerliste
                          - type: custom:mushroom-template-card
                            primary: Klikk for å oppdatere strømmålerlisten
                            secondary: >
                              Sist Oppdatert: {% set last_triggered =
                              state_attr('automation.update_power_measurement_device_list',
                              'last_triggered') %} {% if last_triggered %}
                                {% set time_diff = (now() - last_triggered).total_seconds() %}
                                {% if time_diff < 60 %}
                                  {{ time_diff | round }} seconds ago
                                {% elif time_diff < 3600 %}
                                  {{ (time_diff / 60) | round }} minutes ago
                                {% elif time_diff < 86400 %}
                                  {{ (time_diff / 3600) | round }} hours ago
                                {% else %}
                                  {{ (time_diff / 86400) | round }} days ago
                                {% endif %}
                              {% else %}
                                Never triggered
                              {% endif %}
                            icon: mdi:lightning-bolt
                            badge_icon: mdi:update
                            badge_color: primary
                            tap_action:
                              action: call-service
                              service: automation.trigger
                              service_data:
                                entity_id: >-
                                  automation.update_power_measurement_device_list
                            fill_container: true
                            layout: vertical
                            card_mod:
                              style: |
                                ha-card {
                                  --ha-card-background: var(--ha-card-background) !important;
                                }
                      - type: custom:mushroom-select-card
                        entity: input_select.frequency_hz
                        icon_color: primary
                        primary_info: name
                        secondary_info: last-changed
                        name: Frekvens (Hz)
                      - type: custom:mushroom-select-card
                        entity: input_select.phases_selection
                        icon_color: primary
                        primary_info: name
                        secondary_info: last-changed
                        name: Faser
                      - type: custom:mushroom-select-card
                        entity: input_select.main_fuse_size
                        icon_color: primary
                        primary_info: name
                        secondary_info: last-changed
                        name: Hovedsikring (A)
                      - type: custom:mushroom-select-card
                        entity: input_select.voltage_level
                        icon_color: primary
                        primary_info: name
                        secondary_info: last-changed
                        name: Spenningsnivå (V)
                      - type: custom:mushroom-select-card
                        entity: input_select.stromsoner
                        name: Strømsone
                        icon_color: primary
                        primary_info: name
                      - type: custom:mushroom-select-card
                        entity: input_select.nettselskap
                        icon_color: primary
    background:
      image: /api/image/serve/310913140a083fb6729dca6f63839d4e/original
  - title: Automation control
    path: settings
    icon: mdi:cog
    type: custom:masonry-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: horizontal-stack
          cards:
            - type: custom:gap-card
            - type: custom:button-card
              name: Internett
              icon: mdi:wifi
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              entity: binary_sensor.8_8_8_8
              tap_action:
                action: url
                url_path: https://www.smarti.dev
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: custom:button-card
              name: Alarm
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              tap_action:
                action: more-info
                entity: alarm_control_panel.alarmo
              entity: alarm_control_panel.alarmo
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_motion_sensors
                  above: 0
              card:
                type: custom:button-card
                name: Bevegelse
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive bevegelsedetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: motion
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_motion_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_lights
              card:
                type: custom:button-card
                name: Lys
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive lys
                      content:
                        type: custom:auto-entities
                        show_empty: false
                        card:
                          show_name: true
                          show_icon: true
                          show_state: true
                          type: glance
                          title: Lights on
                          state_color: true
                          columns: 4
                        filter:
                          include:
                            - domain: light
                              state: 'on'
                              options:
                                tap_action:
                                  action: toggle
                        sort:
                          method: none
                          reverse: false
                          numeric: false
                entity: sensor.active_lights
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_doors
              card:
                type: custom:button-card
                name: Dører
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne dører
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: door
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_doors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_windows
                  above: 0
              card:
                type: custom:button-card
                name: Vinduer
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)'
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne Vinduer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: window
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_windows
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_water_sensors
              card:
                type: custom:button-card
                name: Vann
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Vanndetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: moisture
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_water_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_smoke_detectors
                  above: 0
              card:
                type: custom:button-card
                name: Røyk
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Røykdetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: smoke
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_smoke_detectors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_gas_sensors
              card:
                type: custom:button-card
                name: Gass
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Gassdetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: gas
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_gas_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_low_battery_devices_count
              card:
                type: custom:button-card
                name: Batterier
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Batterier
                      content:
                        type: custom:auto-entities
                        card:
                          show_header_toggle: false
                          type: entities
                          state_color: true
                        filter:
                          include:
                            - entity_id: sensor.*_battery
                            - entity_id: binary_sensor.*battery_low
                            - entity_id: sensor.*.battery_state
                          exclude:
                            - state: unavailable
                            - state: '-'
                            - state: unknown
                            - state: none
                            - state: '= 0,0'
                            - state: '>= 20'
                            - state: 'off'
                            - entity_id: sensor.campainha_ring_mqtt_battery
                            - entity_id: sensor.campainha_battery
                            - state: None
                            - state: charging
                            - state: discharging
                            - state: high
                            - name: /[Ll]ow/
                            - name: /[Ss]tate/
                        sort:
                          method: friendly_name
                          numeric: true
                          ignore_case: false
                          ip: false
                          reverse: false
                        show_empty: false
                entity: sensor.active_low_battery_devices_count
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unknown
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unavailable
              card:
                type: custom:mini-graph-card
                entities:
                  - sensor.dynamic_power_sensor
                name: Forbruk
                height: 50
                color_thresholds:
                  - value: 3000
                    color: '#f39c12'
                  - value: 5000
                    color: '#d35400'
                  - value: 8000
                    color: '#c0392b'
                hours_to_show: 6
                points_per_hour: 10
                align_icon: right
                align_state: right
                align_header: right
                show:
                  name: true
                  legend: true
                  icon: false
                  labels: false
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                      background: transparent;
                      color: var(--primary-color);
                    }
                    .graph {
                      mask-image: linear-gradient(to right, transparent, black);
                    }
            - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Home
            show_icon: true
            icon: mdi:home
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: home#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 15px;
                }
          - type: custom:button-card
            name: Rooms
            show_icon: true
            icon: mdi:cube-unfolded
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: rooms#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Light Control
            show_icon: true
            icon: mdi:lightbulb-group
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            state:
              - value: 'on'
                styles:
                  card:
                    - background-color: '#FF7000'
            tap_action:
              action: navigate
              navigation_path: lights#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;   

                }  
          - type: custom:button-card
            name: Heating Control
            show_icon: true
            icon: mdi:thermometer-water
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: heating#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;      
                }
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:multimedia
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Cameras
            show_icon: true
            icon: mdi:shield
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: cameras#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;          
                }
          - type: custom:button-card
            name: Power Control
            show_icon: true
            icon: mdi:lightning-bolt
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: power#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;         
                }
          - type: custom:button-card
            name: Settings
            show_icon: true
            icon: mdi:cog
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px 5px 15px 5px;
                  background-color: var(--primary-color);          
                }  
      - type: custom:gap-card
        height: 25
      - type: custom:mushroom-title-card
        title: Handlinger
        alignment: center
        subtitle: |-

          Enhetsinklueering, innstillinger & systemstatistikk
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Enheter
            show_icon: true
            icon: mdi:devices
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - background: >-
                    linear-gradient(to bottom, var(--accent-color),
                    rgb(var(--rgb-primary-color-darker)))
                - align-items: center
              icon:
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - font-size: 20px
                - font-type: bold
            card_mod:
              style: |
                ha-card {    
                  border-radius: 5px;
                }
          - type: custom:button-card
            name: Innstillinger
            show_icon: true
            icon: mdi:cog
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - align-items: center
              icon:
                - color: var(--primary-color)
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - color: var(--primary-color)
                - font-size: 20px
                - font-type: bold
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  box-shadow: 6.2px 12.3px 12.3px hsl(0deg 0% 0% / 0.31);
                  border: none;
                } 
            tap_action:
              action: navigate
              navigation_path: settings2#
          - type: custom:button-card
            name: Statistikk
            show_icon: true
            icon: mdi:chart-bar-stacked
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - align-items: center
              icon:
                - color: var(--primary-color)
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - color: var(--primary-color)
                - font-size: 20px
                - font-type: bold
            tap_action:
              action: navigate
              navigation_path: settings3#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  box-shadow: 6.2px 12.3px 12.3px hsl(0deg 0% 0% / 0.31);
                  border: none;
                } 
      - type: custom:gap-card
        height: 25
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: custom:gap-card
        height: 25
      - type: custom:button-card
        name: Legg til & administrer Zigbee enheter
        show_icon: true
        icon: mdi:zigbee
        show_name: true
        styles:
          card:
            - max-height: 100px
            - justify-content: center
            - align-items: center
          icon:
            - color: var(--primary-color)
            - max-height: 50px
            - max-width: 100px
            - min-height: 20px
            - min-width: 20px
          name:
            - color: var(--primary-color)
            - font-size: 20px
            - font-type: bold
        tap_action:
          action: navigate
          navigation_path: /45df7312_zigbee2mqtt/ingress
      - type: custom:button-card
        name: Legg til & administrer Z-wave enheter
        show_icon: true
        icon: mdi:z-wave
        show_name: true
        styles:
          card:
            - max-height: 100px
            - justify-content: center
            - align-items: center
          icon:
            - color: var(--primary-color)
            - max-height: 50px
            - max-width: 100px
            - min-height: 20px
            - min-width: 20px
          name:
            - color: var(--primary-color)
            - font-size: 20px
            - font-type: bold
        tap_action:
          action: navigate
          navigation_path: /a0d7b954_zwavejs2mqtt/ingress
      - type: custom:button-card
        name: Legg til & administrer Wifi & Bluetooth enheter
        show_icon: true
        icon: mdi:wifi
        show_name: true
        styles:
          card:
            - max-height: 100px
            - justify-content: center
            - align-items: center
          icon:
            - color: var(--primary-color)
            - max-height: 50px
            - max-width: 100px
            - min-height: 20px
            - min-width: 20px
          name:
            - color: var(--primary-color)
            - font-size: 20px
            - font-type: bold
        tap_action:
          action: navigate
          navigation_path: /config/integrations/dashboard
      - type: custom:button-card
        name: Legg til & administrer Matter enheter
        show_icon: true
        icon: mdi:alpha-m-circle-outline
        show_name: true
        styles:
          card:
            - max-height: 100px
            - justify-content: center
            - align-items: center
          icon:
            - color: var(--primary-color)
            - max-height: 50px
            - max-width: 100px
            - min-height: 20px
            - min-width: 20px
          name:
            - color: var(--primary-color)
            - font-size: 20px
            - font-type: bold
        tap_action:
          action: navigate
          navigation_path: /config/integrations/integration/matter
      - type: custom:gap-card
        height: 25
    background:
      image: /api/image/serve/2014a0bad071b7cae679994518617139/original
  - title: Settings
    path: settings2
    icon: mdi:cog
    type: custom:masonry-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: horizontal-stack
          cards:
            - type: custom:gap-card
            - type: custom:button-card
              name: Internett
              icon: mdi:wifi
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              entity: binary_sensor.8_8_8_8
              tap_action:
                action: url
                url_path: https://www.smarti.dev
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: custom:button-card
              name: Alarm
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              tap_action:
                action: more-info
                entity: alarm_control_panel.alarmo
              entity: alarm_control_panel.alarmo
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_motion_sensors
                  above: 0
              card:
                type: custom:button-card
                name: Bevegelse
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive bevegelsedetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: motion
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_motion_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_lights
              card:
                type: custom:button-card
                name: Lys
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive lys
                      content:
                        type: custom:auto-entities
                        show_empty: false
                        card:
                          show_name: true
                          show_icon: true
                          show_state: true
                          type: glance
                          title: Lights on
                          state_color: true
                          columns: 4
                        filter:
                          include:
                            - domain: light
                              state: 'on'
                              options:
                                tap_action:
                                  action: toggle
                        sort:
                          method: none
                          reverse: false
                          numeric: false
                entity: sensor.active_lights
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_doors
              card:
                type: custom:button-card
                name: Dører
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne dører
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: door
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_doors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_windows
                  above: 0
              card:
                type: custom:button-card
                name: Vinduer
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)'
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne Vinduer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: window
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_windows
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_water_sensors
              card:
                type: custom:button-card
                name: Vann
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Vanndetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: moisture
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_water_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_smoke_detectors
                  above: 0
              card:
                type: custom:button-card
                name: Røyk
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Røykdetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: smoke
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_smoke_detectors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_gas_sensors
              card:
                type: custom:button-card
                name: Gass
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Gassdetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: gas
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_gas_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_low_battery_devices_count
              card:
                type: custom:button-card
                name: Batterier
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Batterier
                      content:
                        type: custom:auto-entities
                        card:
                          show_header_toggle: false
                          type: entities
                          state_color: true
                        filter:
                          include:
                            - entity_id: sensor.*_battery
                            - entity_id: binary_sensor.*battery_low
                            - entity_id: sensor.*.battery_state
                          exclude:
                            - state: unavailable
                            - state: '-'
                            - state: unknown
                            - state: none
                            - state: '= 0,0'
                            - state: '>= 20'
                            - state: 'off'
                            - entity_id: sensor.campainha_ring_mqtt_battery
                            - entity_id: sensor.campainha_battery
                            - state: None
                            - state: charging
                            - state: discharging
                            - state: high
                            - name: /[Ll]ow/
                            - name: /[Ss]tate/
                        sort:
                          method: friendly_name
                          numeric: true
                          ignore_case: false
                          ip: false
                          reverse: false
                        show_empty: false
                entity: sensor.active_low_battery_devices_count
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unknown
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unavailable
              card:
                type: custom:mini-graph-card
                entities:
                  - sensor.dynamic_power_sensor
                name: Forbruk
                height: 50
                color_thresholds:
                  - value: 3000
                    color: '#f39c12'
                  - value: 5000
                    color: '#d35400'
                  - value: 8000
                    color: '#c0392b'
                hours_to_show: 6
                points_per_hour: 10
                align_icon: right
                align_state: right
                align_header: right
                show:
                  name: true
                  legend: true
                  icon: false
                  labels: false
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                      background: transparent;
                      color: var(--primary-color);
                    }
                    .graph {
                      mask-image: linear-gradient(to right, transparent, black);
                    }
            - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Home
            show_icon: true
            icon: mdi:home
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: home#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 15px;
                }
          - type: custom:button-card
            name: Rooms
            show_icon: true
            icon: mdi:cube-unfolded
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: rooms#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Light Control
            show_icon: true
            icon: mdi:lightbulb-group
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            state:
              - value: 'on'
                styles:
                  card:
                    - background-color: '#FF7000'
            tap_action:
              action: navigate
              navigation_path: lights#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;   

                }  
          - type: custom:button-card
            name: Heating Control
            show_icon: true
            icon: mdi:thermometer-water
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: heating#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;      
                }
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:multimedia
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Cameras
            show_icon: true
            icon: mdi:shield
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: cameras#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;          
                }
          - type: custom:button-card
            name: Power Control
            show_icon: true
            icon: mdi:lightning-bolt
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: power#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;         
                }
          - type: custom:button-card
            name: Settings
            show_icon: true
            icon: mdi:cog
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px 5px 15px 5px;
                  background-color: var(--primary-color);          
                }  
      - type: custom:gap-card
        height: 25
      - type: custom:mushroom-title-card
        title: Actions
        alignment: center
        subtitle: |-

          Device Inclusion, Settings & Statistics
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Enheter
            show_icon: true
            icon: mdi:devices
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - align-items: center
              icon:
                - color: var(--primary-color)
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - color: var(--primary-color)
                - font-size: 20px
                - font-type: bold
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  box-shadow: 6.2px 12.3px 12.3px hsl(0deg 0% 0% / 0.31);
                  border: none;
                } 
          - type: custom:button-card
            name: Innstillinger
            show_icon: true
            icon: mdi:cog
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - background: >-
                    linear-gradient(to bottom, var(--accent-color),
                    rgb(var(--rgb-primary-color-darker)))
                - align-items: center
              icon:
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - font-size: 20px
                - font-type: bold
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  border: none;
                } 
          - type: custom:button-card
            name: Statistikk
            show_icon: true
            icon: mdi:chart-bar-stacked
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - align-items: center
              icon:
                - color: var(--primary-color)
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - color: var(--primary-color)
                - font-size: 20px
                - font-type: bold
            tap_action:
              action: navigate
              navigation_path: settings3#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  box-shadow: 6.2px 12.3px 12.3px hsl(0deg 0% 0% / 0.31);
                  border: none;
                } 
      - type: custom:gap-card
        height: 25
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: custom:gap-card
        height: 25
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 20px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                    
        card:
          type: custom:tabbed-card
          tabs:
            - attributes:
                label: SMARTi Automasjoner
                icon: mdi:home-automation
              card:
                type: vertical-stack
                cards:
                  - type: custom:mushroom-title-card
                    title: ''
                    subtitle: >-
                      Alle automasjoner som kreves for at SMARTi skal fungere
                      som normalt vises her.
                  - type: custom:auto-entities
                    card:
                      type: entities
                      title: Automasjoner
                      show_header_toggle: true
                    filter:
                      include:
                        - domain: automation
                          label: SMARTi
                      exclude: []
            - attributes:
                label: Mine Automasjoner
                icon: mdi:autorenew
              card:
                type: vertical-stack
                cards:
                  - type: custom:gap-card
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        name: Lag eller rediger automasjoner
                        show_icon: true
                        icon: mdi:auto-mode
                        show_name: true
                        styles:
                          card:
                            - height: 65px
                            - max-height: 65px
                            - padding: 10px
                            - margin: 0
                            - border-width: 2px
                            - color: var(--ha-card-background)
                          icon:
                            - color: var(--primary-color)
                          text:
                            - color: var(--primary-color)
                        card_mod:
                          style: |
                            ha-card {
                              height: 65px;
                              max-height: 65px;
                              padding: 0;
                              margin: 0;
                              border-radius: 10px;
                              --ha-card-background: var(--ha-card-background) !important;
                            }
                        tap_action:
                          action: navigate
                          navigation_path: /config/automation/dashboard
                  - type: custom:auto-entities
                    card:
                      type: entities
                      title: Automasjoner
                      show_header_toggle: true
                    filter:
                      include:
                        - domain: automation
                      exclude:
                        - label: SMARTi
            - attributes:
                label: Scener
                icon: mdi:movie
              card:
                type: vertical-stack
                cards:
                  - type: custom:gap-card
                  - type: vertical-stack
                    cards:
                      - type: custom:button-card
                        name: Lag eller rediger scener
                        show_icon: true
                        icon: mdi:movie
                        show_name: true
                        styles:
                          card:
                            - height: 65px
                            - max-height: 65px
                            - padding: 10px
                            - margin: 0
                            - border-width: 2px
                            - color: var(--ha-card-background)
                          icon:
                            - color: var(--primary-color)
                          text:
                            - color: var(--primary-color)
                        card_mod:
                          style: |
                            ha-card {
                              height: 65px;
                              max-height: 65px;
                              padding: 0;
                              margin: 0;
                              border-radius: 10px;
                              --ha-card-background: var(--ha-card-background) !important;
                            }
                        tap_action:
                          action: navigate
                          navigation_path: /config/scene/dashboard
                      - type: custom:gap-card
                  - type: custom:auto-entities
                    card:
                      type: entities
                      title: Scener
                      show_header_toggle: false
                    filter:
                      include:
                        - domain: scene
            - attributes:
                label: SMARTi innstillinger
                icon: mdi:cog
              card:
                type: vertical-stack
                cards:
                  - type: vertical-stack
                    cards:
                      - type: custom:mushroom-select-card
                        entity: input_select.default_dashboard
                        icon_color: primary
                        primary_info: name
                      - type: custom:button-card
                        name: Se etter ny dashbordverjson
                        show_icon: true
                        icon: mdi:update
                        show_name: true
                        styles:
                          card:
                            - margin-top: 20px
                            - max-height: 80px
                            - justify-content: center
                            - align-items: center
                          icon:
                            - max-height: 40px
                            - max-width: 30px
                            - min-height: 40px
                            - min-width: 20px
                        tap_action:
                          action: url
                          url_path: https://www.smarti.dev/smarti-dasboard-version
                        card_mod:
                          style: |
                            ha-card {
                              border-radius: 15px 15px 15px 15px;
                              --ha-card-background: var(--ha-card-background) !important;
                            }  
                      - type: custom:button-text-card
                        title: Versjon
                        subtitle: v1.0.0
                        icon: mdi:vector-selection
            - attributes:
                label: Oppdateringer
                icon: mdi:update
              card:
                type: custom:auto-entities
                filter:
                  include:
                    - domain: update
                      state: 'on'
                    - entity_id: sensor.hacs
                      state: '! 0'
                show_empty: false
                sort:
                  method: last_triggered
                card:
                  type: custom:stack-in-card
                  title: Add-ons- og integrasjonsoppdateringer
                  mode: vertical
                  cards:
                    - type: custom:mushroom-title-card
                      title: ''
                      subtitle: >-
                        Alle tilgjengelige oppdateringer som kreves for at
                        SMARTi skal fungere, oppdateres hver natt mellom 02:00
                        og 03:00           
                    - type: custom:auto-entities
                      card:
                        type: entities
                        show_header_toggle: false
                      filter:
                        include:
                          - domain: update
                            state: 'on'
                      show_empty: false
                      sort:
                        method: last_triggered
                    - type: custom:auto-entities
                      card:
                        type: markdown
                        content: |-
                          {%- if is_state('sensor.hacs','0') -%}
                            <b><font color=green>No updates</font></b>
                          {%- else -%}
                            <table width=100%>
                            <b> HACS Oppdateringer: <br>
                            <br>
                            {%- set hacs_updates = state_attr('sensor.hacs','repositories') -%}
                            {%- for hacs_update in hacs_updates -%} 
                              <tr><td> {{[hacs_update][0]['display_name']}}</b></font></td><td>{{[hacs_update][0]['installed_version']}}</td><td>{{[hacs_update][0]['available_version']}}</td></tr>
                            {%- endfor -%}
                            </table>
                          {%- endif -%}
                      filter:
                        include:
                          - entity_id: sensor.hacs
                            state: '! 0'
                      show_empty: false
                      sort: date
                method: last_triggered
      - type: custom:gap-card
    background:
      image: /api/image/serve/5e45c1b22e0615ed1dfc5c094087d395/original
  - title: Statistics
    path: settings3
    icon: mdi:cog
    type: custom:masonry-layout
    layout:
      max_width: 2000
      max_cols: 1
    subview: true
    cards:
      - type: conditional
        conditions:
          - condition: screen
            media_query: '(min-width: 768px)'
        card:
          type: horizontal-stack
          cards:
            - type: custom:gap-card
            - type: custom:button-card
              name: Internett
              icon: mdi:wifi
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              entity: binary_sensor.8_8_8_8
              tap_action:
                action: url
                url_path: https://www.smarti.dev
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: custom:button-card
              name: Alarm
              show_state: true
              show_icon: true
              styles:
                card:
                  - font-size: 13px
                  - height: 150px
                  - background-color: rgba(0, 0, 0, 0)
                  - divider-color: transparent
                icon:
                  - color: var(--primary-color)
                  - font-size: 3em
                  - text-align: center
                  - max-height: 50px
                  - max-width: 50px
                  - min-height: 30px
                  - min-width: 30px
                name:
                  - color: var(--primary-text-color)
                  - font-weight: bold
              tap_action:
                action: more-info
                entity: alarm_control_panel.alarmo
              entity: alarm_control_panel.alarmo
              card_mod:
                style: |
                  ha-card {
                    border: 2px solid var(--border-color);
                    transition: transform 0.5s ease, box-shadow 0.5s ease;
                  }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_motion_sensors
                  above: 0
              card:
                type: custom:button-card
                name: Bevegelse
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive bevegelsedetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: motion
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_motion_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_lights
              card:
                type: custom:button-card
                name: Lys
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Aktive lys
                      content:
                        type: custom:auto-entities
                        show_empty: false
                        card:
                          show_name: true
                          show_icon: true
                          show_state: true
                          type: glance
                          title: Lights on
                          state_color: true
                          columns: 4
                        filter:
                          include:
                            - domain: light
                              state: 'on'
                              options:
                                tap_action:
                                  action: toggle
                        sort:
                          method: none
                          reverse: false
                          numeric: false
                entity: sensor.active_lights
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_doors
              card:
                type: custom:button-card
                name: Dører
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne dører
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: door
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_doors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_windows
                  above: 0
              card:
                type: custom:button-card
                name: Vinduer
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)'
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Åpne Vinduer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: window
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_windows
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_water_sensors
              card:
                type: custom:button-card
                name: Vann
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Vanndetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: moisture
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_water_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  entity: sensor.active_smoke_detectors
                  above: 0
              card:
                type: custom:button-card
                name: Røyk
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Røykdetekotrer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: smoke
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_smoke_detectors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_gas_sensors
              card:
                type: custom:button-card
                name: Gass
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Gassdetektorer
                      content:
                        type: custom:auto-entities
                        card:
                          type: entities
                        filter:
                          include:
                            - domain: binary_sensor
                              attributes:
                                device_class: gas
                              state: 'on'
                        sort:
                          reverse: true
                entity: sensor.active_gas_sensors
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: numeric_state
                  above: 0
                  entity: sensor.active_low_battery_devices_count
              card:
                type: custom:button-card
                name: Batterier
                show_state: true
                show_icon: true
                styles:
                  card:
                    - font-size: 13px
                    - height: 150px
                    - background-color: rgba(0, 0, 0, 0)
                  icon:
                    - color: var(--primary-color)
                    - font-size: 3em
                    - text-align: center
                    - max-height: 50px
                    - max-width: 50px
                    - min-height: 30px
                    - min-width: 30px
                  name:
                    - color: var(--primary-text-color)
                    - font-weight: bold
                tap_action:
                  action: fire-dom-event
                  browser_mod:
                    service: browser_mod.popup
                    data:
                      dismissable: true
                      autoclose: false
                      title: Batterier
                      content:
                        type: custom:auto-entities
                        card:
                          show_header_toggle: false
                          type: entities
                          state_color: true
                        filter:
                          include:
                            - entity_id: sensor.*_battery
                            - entity_id: binary_sensor.*battery_low
                            - entity_id: sensor.*.battery_state
                          exclude:
                            - state: unavailable
                            - state: '-'
                            - state: unknown
                            - state: none
                            - state: '= 0,0'
                            - state: '>= 20'
                            - state: 'off'
                            - entity_id: sensor.campainha_ring_mqtt_battery
                            - entity_id: sensor.campainha_battery
                            - state: None
                            - state: charging
                            - state: discharging
                            - state: high
                            - name: /[Ll]ow/
                            - name: /[Ss]tate/
                        sort:
                          method: friendly_name
                          numeric: true
                          ignore_case: false
                          ip: false
                          reverse: false
                        show_empty: false
                entity: sensor.active_low_battery_devices_count
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                    }
            - type: conditional
              conditions:
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unknown
                - condition: state
                  entity: sensor.dynamic_power_sensor
                  state_not: unavailable
              card:
                type: custom:mini-graph-card
                entities:
                  - sensor.dynamic_power_sensor
                name: Forbruk
                height: 50
                color_thresholds:
                  - value: 3000
                    color: '#f39c12'
                  - value: 5000
                    color: '#d35400'
                  - value: 8000
                    color: '#c0392b'
                hours_to_show: 6
                points_per_hour: 10
                align_icon: right
                align_state: right
                align_header: right
                show:
                  name: true
                  legend: true
                  icon: false
                  labels: false
                card_mod:
                  style: |
                    ha-card {
                      border: 2px solid var(--border-color);
                      transition: transform 0.5s ease, box-shadow 0.5s ease;
                      background: transparent;
                      color: var(--primary-color);
                    }
                    .graph {
                      mask-image: linear-gradient(to right, transparent, black);
                    }
            - type: custom:gap-card
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Home
            show_icon: true
            icon: mdi:home
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: home#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 15px;
                }
          - type: custom:button-card
            name: Rooms
            show_icon: true
            icon: mdi:cube-unfolded
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: rooms#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;
                }
          - type: custom:button-card
            name: Light Control
            show_icon: true
            icon: mdi:lightbulb-group
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            state:
              - value: 'on'
                styles:
                  card:
                    - background-color: '#FF7000'
            tap_action:
              action: navigate
              navigation_path: lights#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;   

                }  
          - type: custom:button-card
            name: Heating Control
            show_icon: true
            icon: mdi:thermometer-water
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: heating#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;      
                }
          - type: custom:button-card
            name: Multimedia
            show_icon: true
            icon: mdi:multimedia
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - color: black
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: multimedia#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;    
                }
          - type: custom:button-card
            name: Cameras
            show_icon: true
            icon: mdi:shield
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: cameras#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;          
                }
          - type: custom:button-card
            name: Power Control
            show_icon: true
            icon: mdi:lightning-bolt
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
                - color: var(--primary-color)
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: power#
            card_mod:
              style: |
                ha-card {
                  border-radius: 5px 5px 5px 5px;         
                }
          - type: custom:button-card
            name: Settings
            show_icon: true
            icon: mdi:cog
            show_name: false
            styles:
              card:
                - max-height: 50px
                - justify-content: center
                - align-items: center
              icon:
                - max-height: 30px
                - max-width: 30px
                - min-height: 30px
                - min-width: 20px
              name:
                - color: black
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px 5px 15px 5px;
                  background-color: var(--primary-color);          
                }  
      - type: custom:gap-card
        height: 25
      - type: custom:mushroom-title-card
        title: Actions
        alignment: center
        subtitle: |-

          Device Inclusion, Settings & Statistics
      - type: horizontal-stack
        cards:
          - type: custom:button-card
            name: Enheter
            show_icon: true
            icon: mdi:devices
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - align-items: center
              icon:
                - color: var(--primary-color)
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - color: var(--primary-color)
                - font-size: 20px
                - font-type: bold
            tap_action:
              action: navigate
              navigation_path: settings#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  box-shadow: 6.2px 12.3px 12.3px hsl(0deg 0% 0% / 0.31);
                  border: none;
                } 
          - type: custom:button-card
            name: Innstillinger
            show_icon: true
            icon: mdi:cog
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - align-items: center
              icon:
                - color: var(--primary-color)
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - color: var(--primary-color)
                - font-size: 20px
                - font-type: bold
            tap_action:
              action: navigate
              navigation_path: settings2#
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  box-shadow: 6.2px 12.3px 12.3px hsl(0deg 0% 0% / 0.31);
                  border: none;
                } 
          - type: custom:button-card
            name: Statistikk
            show_icon: true
            icon: mdi:chart-bar-stacked
            show_name: true
            styles:
              card:
                - max-height: 100px
                - justify-content: center
                - background: >-
                    linear-gradient(to bottom, var(--accent-color),
                    rgb(var(--rgb-primary-color-darker)))
                - align-items: center
              icon:
                - max-height: 50px
                - max-width: 100px
                - min-height: 20px
                - min-width: 20px
              name:
                - font-size: 20px
                - font-type: bold
            card_mod:
              style: |
                ha-card{
                  border-radius: 5px;
                  border: none;
                } 
      - type: custom:gap-card
        height: 25
      - type: custom:button-card
        styles:
          card:
            - height: 5px
            - max-height: 10px
            - padding: 0
            - margin: 0
            - background-color: var(--primary-color);
        card_mod:
          style: |
            ha-card {
              border-radius: 1px;
              height: 2px;
              max-height: 2px;
              padding: 0;
              margin: 0;
              background: var(--primary-color);
            }
      - type: custom:gap-card
        height: 25
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 5px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                      }
                    
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Watcher
              show_icon: true
              icon: mdi:package
              show_name: false
              styles:
                card:
                  - height: 100%
                  - width: 50px
                  - justify-content: center
                  - align-items: center
                  - background-color: var(--primary-color);
                icon:
                  - scale: 2
                name:
                  - color: black
                  - font-size: 20px
                  - font-type: bold
            - type: horizontal-stack
              cards:
                - type: entity
                  entity: sensor.watchman_missing_entities
                  name: Missing Entities
                - type: entity
                  entity: sensor.watchman_missing_services
                  name: Missing services
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius:5px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                      }
                    
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:web
              show_name: false
              styles:
                card:
                  - height: 100%
                  - width: 50px
                  - justify-content: center
                  - align-items: center
                  - background-color: var(--primary-color);
                icon:
                  - scale: 2
                name:
                  - color: black
                  - font-size: 20px
                  - font-type: bold
            - type: custom:uptime-card
              entity: binary_sensor.8_8_8_8
              hours_to_show: 96
              title_adaptive_color: true
              status_adaptive_color: true
              icon: mdi:web
              update_interval: 30
              severity: 10
              icon_adaptive_color: true
              tooltip_adaptive_color: true
              alias:
                ok: Connected
                ko: Disconnected
              resources:
                - url: /local/uptime-card.js
                - type: module
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 5px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                      }
                    
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:eye-circle
              show_name: false
              styles:
                card:
                  - height: 100%
                  - width: 50px
                  - justify-content: center
                  - align-items: center
                  - background-color: var(--primary-color);
                icon:
                  - scale: 2
                name:
                  - color: black
                  - font-size: 20px
                  - font-type: bold
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px;
                  }  
            - type: vertical-stack
              cards:
                - type: horizontal-stack
                  cards:
                    - type: horizontal-stack
                      cards:
                        - type: vertical-stack
                          cards:
                            - type: custom:apexcharts-card
                              apex_config:
                                chart:
                                  height: 355px
                              header:
                                show: true
                                title: System Monitor
                                show_states: true
                                colorize_states: true
                              chart_type: radialBar
                              series:
                                - entity: sensor.system_monitor_processor_use
                                  name: Core CPU Percentage
                                  show:
                                    in_chart: true
                                - entity: sensor.system_monitor_memory_usage
                                  name: Core Memory Precentage
                                  show:
                                    in_chart: true
                                - entity: sensor.system_monitor_disk_free
                                  name: Host Disk Free (%)
                                  show:
                                    in_header: true
                                    in_chart: false
                                - entity: sensor.system_monitor_disk_use
                                  name: Host Disk Total
                                  show:
                                    in_chart: false
                                - entity: sensor.system_monitor_processor_temperature
                                  name: Supervisor CPU Temp (C)
                                  show:
                                    in_chart: false
                                - entity: sensor.system_monitor_memory_free
                                  name: Supervisor Memory Free
                                  show:
                                    in_header: true
                                    in_chart: false
                - type: horizontal-stack
                  cards:
                    - type: conditional
                      conditions: []
                      card:
                        type: horizontal-stack
                        cards:
                          - chart_type: line
                            period: 5minute
                            type: statistics-graph
                            entities:
                              - sensor.system_monitor_memory_free
                            stat_types:
                              - mean
                              - min
                              - max
                          - chart_type: line
                            period: 5minute
                            type: statistics-graph
                            entities:
                              - sensor.system_monitor_processor_use
                            stat_types:
                              - mean
                              - min
                              - max
                          - chart_type: line
                            period: 5minute
                            type: statistics-graph
                            entities:
                              - sensor.system_monitor_disk_free
                            stat_types:
                              - mean
                              - min
                              - max
                            unit: GiB
        visibility:
          - condition: screen
            media_query: '(min-width: 768px)'
      - type: custom:mod-card
        card_mod:
          style:
            .: |
              ha-card {
                --ha-card-border-width: 0.5px;
                --ha-card-border-radius: 5px;
                --ha-card-background: transparent;
              } 
            tabbed-card $:
              mwc-tab:
                $: |
                  .mdc-tab--active {
                    background: linear-gradient(to left, var(--accent-color), rgb(var(--rgb-primary-color-darker))) !important;
                    border-radius: 5px 5px 0px 0px;
                  }
                  mwc-tab:hover {
                    --mdc-theme-primary: red;
                    --mdc-tab-color-default: red;
                      }
                    
        card:
          type: horizontal-stack
          cards:
            - type: custom:button-card
              name: Settings
              show_icon: true
              icon: mdi:eye-circle
              show_name: false
              styles:
                card:
                  - height: 100%
                  - width: 50px
                  - justify-content: center
                  - align-items: center
                  - background-color: var(--primary-color);
                icon:
                  - scale: 2
                name:
                  - color: black
                  - font-size: 20px
                  - font-type: bold
              card_mod:
                style: |
                  ha-card{
                    border-radius: 5px;
                  }  
            - type: vertical-stack
              cards:
                - type: vertical-stack
                  cards:
                    - type: custom:apexcharts-card
                      apex_config:
                        chart:
                          height: 355px
                      header:
                        show: true
                        title: System Monitor
                        show_states: true
                        colorize_states: true
                      chart_type: radialBar
                      series:
                        - entity: sensor.system_monitor_processor_use
                          name: Core CPU Percentage
                          show:
                            in_chart: true
                        - entity: sensor.system_monitor_memory_usage
                          name: Core Memory Precentage
                          show:
                            in_chart: true
                        - entity: sensor.system_monitor_disk_free
                          name: Host Disk Free (%)
                          show:
                            in_header: true
                            in_chart: false
                        - entity: sensor.system_monitor_disk_use
                          name: Host Disk Total
                          show:
                            in_chart: false
                        - entity: sensor.system_monitor_processor_temperature
                          name: Supervisor CPU Temp (C)
                          show:
                            in_chart: false
                        - entity: sensor.system_monitor_memory_free
                          name: Supervisor Memory Free
                          show:
                            in_header: true
                            in_chart: false
                    - chart_type: line
                      period: 5minute
                      type: statistics-graph
                      entities:
                        - sensor.system_monitor_memory_free
                      stat_types:
                        - mean
                        - min
                        - max
                    - chart_type: line
                      period: 5minute
                      type: statistics-graph
                      entities:
                        - sensor.system_monitor_processor_use
                      stat_types:
                        - mean
                        - min
                        - max
                    - chart_type: line
                      period: 5minute
                      type: statistics-graph
                      entities:
                        - sensor.system_monitor_disk_free
                      stat_types:
                        - mean
                        - min
                        - max
                      unit: GiB
        visibility:
          - condition: screen
            media_query: '(min-width: 0px) and (max-width: 767px)'
    background:
      image: /api/image/serve/e9e7fd1d33d9d0b620d6117c5452ee1d/original
